<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no">

    
      <link rel="icon" href="/favicon.png" />
    

    <title>
        
          Java Features Summary - BUAA 2023 OOP
        
    </title>

    <!-- Spectre.css framework -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/spectre.css/0.5.9/spectre.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/spectre.css/0.5.9/spectre-exp.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/spectre.css/0.5.9/spectre-icons.min.css">

    <!-- theme css & js -->
    
<link rel="stylesheet" href="/css/book.css">

    
<script src="/js/book.js"></script>


    <!-- tocbot -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.css">

    <!-- katex -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">

    
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/zooming/2.1.1/zooming.min.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function () {
    const zooming = new Zooming()
    zooming.listen('.book-content img')
})
</script>

<!-- hexo injector head_end start -->
<link rel="stylesheet" href="/css/collapse.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 5.4.2"></head>

<body>

<div class="book-container">
  <div class="book-sidebar">
    <div class="book-brand">
  <a href="/">
    <img src="/favicon.png">
    <span>BUAA 2023 OOP</span>
  </a>
</div>
    <div id="menu" class="book-menu hide">
  <h1 id="Lab-ğŸ”¬"><a class="header-anchor" href="#Lab-ğŸ”¬">Â¶ </a><strong>Lab ğŸ”¬</strong></h1>
<ul>
<li><a href="/2023/Lab-1">Lab 1</a></li>
<li>To Be Continuedâ€¦ ğŸ«£</li>
</ul>
<h1 id="è¿­ä»£ä»»åŠ¡-ğŸ“½ï¸"><a class="header-anchor" href="#è¿­ä»£ä»»åŠ¡-ğŸ“½ï¸">Â¶ </a><strong>è¿­ä»£ä»»åŠ¡ ğŸ“½ï¸</strong></h1>
<ul>
<li>To Be Continuedâ€¦ ğŸ™ˆ</li>
</ul>
<h1 id="å¸®åŠ©ä¸­å¿ƒ-ğŸ’ğŸ»"><a class="header-anchor" href="#å¸®åŠ©ä¸­å¿ƒ-ğŸ’ğŸ»">Â¶ </a><strong>å¸®åŠ©ä¸­å¿ƒ ğŸ’ğŸ»</strong></h1>
<ul>
<li><a href="/2023/Lab-Template">Lab é—®ç­”æŠ¥å‘Šæ¨¡æ¿</a></li>
<li><a href="/2023/patpat-User-Guide">patpat ä½¿ç”¨æŒ‡å—</a></li>
<li><a href="/2023/Java-Features-Summary">Java 8 - 17 æ–°ç‰¹æ€§æ€»ç»“</a></li>
</ul>

</div>


<script src="/js/book-menu.js"></script>

  </div>

  <div class="sidebar-toggle" onclick="sidebar_toggle()" onmouseover="add_inner()" onmouseleave="remove_inner()">
  <div class="sidebar-toggle-inner"></div>
</div>

<script>
function add_inner() {
  let inner = document.querySelector('.sidebar-toggle-inner')
  inner.classList.add('show')  
}

function remove_inner() {
  let inner = document.querySelector('.sidebar-toggle-inner')
  inner.classList.remove('show')
}

function sidebar_toggle() {
    let sidebar_toggle = document.querySelector('.sidebar-toggle')
    let sidebar = document.querySelector('.book-sidebar')
    let content = document.querySelector('.off-canvas-content')
    if (sidebar_toggle.classList.contains('extend')) { // show
        sidebar_toggle.classList.remove('extend')
        sidebar.classList.remove('hide')
        content.classList.remove('extend')
    }
    else { // hide
        sidebar_toggle.classList.add('extend')
        sidebar.classList.add('hide')
        content.classList.add('extend')
    }
}
</script>

  <div class="off-canvas-content">
    <div class="columns">
      <div class="column col-10 col-lg-12">
        <div class="book-navbar">
          <!-- For Responsive Layout -->

<header class="navbar">
  <section class="navbar-section">
    <a onclick="open_sidebar()">
      <i class="icon icon-menu"></i>
    </a>
  </section>
</header>

        </div>
        <div class="book-content">
          <div class="book-post">
  <h1 id="Java-8-17-æ–°ç‰¹æ€§æ€»ç»“"><a class="header-anchor" href="#Java-8-17-æ–°ç‰¹æ€§æ€»ç»“">Â¶ </a>Java 8 - 17 æ–°ç‰¹æ€§æ€»ç»“</h1>
<blockquote>
<p>æœ¬æ–‡åŒ…å«äº† Java 8 è‡³ Java 17 ä¸­å„ä¸ªç‰ˆæœ¬å¼•å…¥çš„ä¸»è¦æ–°ç‰¹æ€§ï¼Œä¾›å¤§å®¶å‚è€ƒã€‚ğŸ˜‹</p>
<p>å¾€å¹´æ€»ç»“ï¼š</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://ryouonritsu.github.io/Java-HomeWork/docs/Resource/Java8-17%E8%AF%AD%E6%B3%95%E6%96%B0%E7%89%B9%E6%80%A7%E6%80%BB%E7%BB%93/">2022ï¼šJava 8 - 17 è¯­æ³•æ–°ç‰¹æ€§æ€»ç»“</a></li>
</ul>
<p>å‚è€ƒæ–‡ç« ï¼š</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.happycoders.eu/java/">Java â€“ How-Tos and Tutorials</a>ï¼ˆç›¸å¯¹æ›´å…¨é¢ç»†è‡´ğŸ¤©ï¼‰</li>
<li><a target="_blank" rel="noopener" href="https://reflectoring.io/java-release-notes/">Java Features from Java 8 to Java 17</a>ï¼ˆèŒƒä¾‹å¾ˆå¥½ğŸ˜ï¼‰</li>
<li><a target="_blank" rel="noopener" href="https://juejin.cn/post/7250734439709048869">JDK 8 - JDK 17 æ–°ç‰¹æ€§æ€»ç»“</a>ï¼ˆéƒ¨åˆ†æ—¶é—´çº¿é”™ä¹±ğŸ˜µâ€ğŸ’«ï¼‰</li>
</ul>
<p><em>æœ¬æ–‡ä¸­çš„ä»£ç å¤§å¤šæ¥è‡ªä»¥ä¸Šæ–‡ç« ã€‚</em></p>
</blockquote>
<div class="admonition note"><p class="admonition-title">Note</p><p>å¸¦ <code>*</code> çš„ç‰¹æ€§è¡¨ç¤ºè¯¥ç‰¹æ€§å·²åœ¨æ›´æ—©çš„ Java ç‰ˆæœ¬ä¸­å¼•å…¥ï¼Œä½†æ˜¯åœ¨è¯¥ç‰ˆæœ¬ä¸­è¿›è¡Œäº†æ”¹è¿›ã€‚</p>
</div>
<div class="admonition info"><p class="admonition-title">Info</p><p>æœ‰å…³ Java å’Œ JDK ç‰ˆæœ¬å·çš„é—®é¢˜ï¼Œå¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« ï¼š<a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/2128820">Java ç‰ˆæœ¬å’Œ JDK ç‰ˆæœ¬</a>ã€‚ï¼ˆçœæµï¼šJava 8 = JDK 1.8 = JDK 8ã€‚ğŸ«¢ï¼‰
æœ¬æ–‡ç»Ÿä¸€ä½¿ç”¨ Java X æŒ‡ä»£å„ä¸ªç‰ˆæœ¬ã€‚</p>
</div>
<hr>
<h1 id="1-Java-8"><a class="header-anchor" href="#1-Java-8">Â¶ </a>1. Java 8</h1>
<h2 id="1-1-Lambda-è¡¨è¾¾å¼å’Œ-Stream-API"><a class="header-anchor" href="#1-1-Lambda-è¡¨è¾¾å¼å’Œ-Stream-API">Â¶ </a>1.1 Lambda è¡¨è¾¾å¼å’Œ Stream API</h2>
<div class="admonition info"><p class="admonition-title">Docs
</p><p><a target="_blank" rel="noopener" href="https://docs.oracle.com/javase/tutorial/java/javaOO/lambdaexpressions.html">Lambda Expressions</a></p>
</div>
<p>Lambda è¡¨è¾¾å¼çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼Œå…¶å¯¹åº”ä¸€ä¸ªå‡½æ•°å¼æ¥å£ï¼ˆå³åªæœ‰ä¸€ä¸ªæ–¹æ³•çš„æ¥å£ï¼‰ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(param1, param2, ...) -&gt; expression æˆ–</span><br><span class="line">(param1, param2, ...) -&gt;&#123; statements; &#125;</span><br></pre></td></tr></table></figure>
<p>Stream API ç”¨äºå¤„ç†é›†åˆå’Œæ•°ç»„ç­‰æ•°æ®æºçš„å…ƒç´ åºåˆ—ï¼Œæä¾›äº†ä¸€ç§æµå¼æ“ä½œçš„æ–¹å¼ï¼Œå¯ä»¥ç”¨äºå¯¹æ•°æ®è¿›è¡Œè¿‡æ»¤ã€æ˜ å°„ã€æ’åºã€èšåˆç­‰å„ç§æ“ä½œï¼Œä»è€Œæ›´åŠ æ–¹ä¾¿å’Œé«˜æ•ˆåœ°å¤„ç†æ•°æ®ã€‚ç»“åˆ Stream API ä¸ Lambda è¡¨è¾¾å¼ï¼Œä»£ç å¯ä»¥å˜å¾—æ›´åŠ ç®€æ´æ˜“æ‡‚ã€‚</p>
<p>åœ¨ Java 8 ä¹‹å‰ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¿‡æ»¤åˆ—è¡¨ä¸­çš„æ•°æ®ï¼Œæˆ‘ä»¬åªèƒ½è¿™æ ·åšï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LambdaExpressions</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> List&lt;Car&gt; <span class="title function_">findCarsOldWay</span><span class="params">(List&lt;Car&gt; cars)</span> &#123;</span><br><span class="line">        List&lt;Car&gt; selectedCars = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (Car car : cars) &#123;</span><br><span class="line">            <span class="keyword">if</span> (car.kilometers &lt; <span class="number">50000</span>) &#123;</span><br><span class="line">                selectedCars.add(car);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> selectedCars;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨ Lambda è¡¨è¾¾å¼å’Œ Stream API åï¼ŒJava èƒ½å¤Ÿæ›´è½»æ¾åœ°å®ç°å‡½æ•°å¼ç¼–ç¨‹ï¼Œç®€åŒ–ä»£ç çš„ç¼–å†™ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LambdaExpressions</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> List&lt;Car&gt; <span class="title function_">findCarsUsingLambda</span><span class="params">(List&lt;Car&gt; cars)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> cars.stream()</span><br><span class="line">            .filter(car -&gt; car.kilometers &lt; <span class="number">50000</span>)</span><br><span class="line">            .collect(Collectors.toList());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<div class="admonition note"><p class="admonition-title">Note</p><p>Java 8 ä¸­è¿˜æä¾›äº†ä¸€äº›é€šç”¨çš„å‡½æ•°å¼æ¥å£ï¼Œå¦‚ <code>Consumer&lt;T&gt;</code>ï¼Œ<code>Supplier&lt;T&gt;</code> ç­‰ï¼Œæ›´å¤šå†…å®¹å¯å‚è€ƒä»¥ä¸‹æ–‡ç« ï¼š</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://shivaprasadgurram.hashnode.dev/java-8s-consumer-predicate-and-supplier-functional-interfaces">Java 8's Consumer, Predicate and Supplier Functional Interfaces</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_33591903/article/details/102948344">å¿«é€Ÿç†è§£ Consumerã€Supplierã€Predicate ä¸ Function</a></li>
</ul>
</div>
<h2 id="1-2-æ–¹æ³•å¼•ç”¨ï¼ˆMethod-Referenceï¼‰"><a class="header-anchor" href="#1-2-æ–¹æ³•å¼•ç”¨ï¼ˆMethod-Referenceï¼‰">Â¶ </a>1.2 æ–¹æ³•å¼•ç”¨ï¼ˆMethod Referenceï¼‰</h2>
<div class="admonition info"><p class="admonition-title"> Docs
</p><p><a target="_blank" rel="noopener" href="https://docs.oracle.com/javase/tutorial/java/javaOO/methodreferences.html">Method References</a></p>
</div>
<p>æ–¹æ³•å¼•ç”¨è¿›ä¸€æ­¥ç®€åŒ–äº†å‡½æ•°å¼æ¥å£ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ç°æœ‰çš„æ–¹æ³•ä½œä¸º Lambda è¡¨è¾¾å¼ï¼Œå…¶åŸºæœ¬è¯­æ³•å¦‚ä¸‹ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ClassName::MethodName</span><br></pre></td></tr></table></figure>
<p>ä¾‹å¦‚ï¼Œåœ¨ä¸ä½¿ç”¨æ–¹æ³•å¼•ç”¨æ—¶ï¼Œæˆ‘ä»¬å¿…é¡»å°†æˆå‘˜å‡½æ•°è½¬æ¢ä¸º Lambda è¡¨è¾¾å¼çš„å†™æ³•ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MethodReference</span> &#123;</span><br><span class="line">    List&lt;String&gt; withoutMethodReference = cars.stream()</span><br><span class="line">        .map(car -&gt; car.toString())</span><br><span class="line">        .collect(Collectors.toList());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è€Œä½¿ç”¨æ–¹æ³•å¼•ç”¨ï¼Œåˆ™ä¸ç”¨å†™æˆ Lambda è¡¨è¾¾å¼çš„å½¢å¼ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MethodReference</span> &#123;</span><br><span class="line">    List&lt;String&gt; methodReference = cars.stream()</span><br><span class="line">        .map(Car::toString)</span><br><span class="line">        .collect(Collectors.toList());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="1-3-æ¥å£çš„é»˜è®¤æ–¹æ³•å’Œé™æ€æ–¹æ³•"><a class="header-anchor" href="#1-3-æ¥å£çš„é»˜è®¤æ–¹æ³•å’Œé™æ€æ–¹æ³•">Â¶ </a>1.3 æ¥å£çš„é»˜è®¤æ–¹æ³•å’Œé™æ€æ–¹æ³•</h2>
<div class="admonition info"><p class="admonition-title"> Docs
</p><p><a target="_blank" rel="noopener" href="https://docs.oracle.com/javase/tutorial/java/IandI/defaultmethods.html">Default Methods &amp; Static Methods</a></p>
</div>
<p>Java 8 ä¹‹å‰ï¼Œæ¥å£ä¸­åªèƒ½å£°æ˜ï¼Œè€Œä¸èƒ½å®ç°æ–¹æ³•ï¼Œè¿™æ ·å°±å¯¼è‡´æ¥å£çš„å˜æ›´ä¼šå¯¼è‡´æ—§ä»£ç æ— æ³•é€šè¿‡ç¼–è¯‘ã€‚Java 8 å…è®¸åœ¨æ¥å£ä¸­å®šä¹‰å…·æœ‰é»˜è®¤å®ç°çš„æ–¹æ³•ï¼Œä½¿å¾—æ¥å£æ›´æ–°ä¸ç ´åç°æœ‰çš„ç±»å®ç°ã€‚</p>
<p>æ¯”å¦‚ï¼Œè¿™é‡Œ <code>Logging</code> æ¥å£æä¾›äº†ä¸€ä¸ªé»˜è®¤æ–¹æ³•ï¼Œå› æ­¤å®ç°å®ƒçš„ç±»å¯ä»¥é€‰æ‹©ä¸è¿›è¡Œå®ç°ï¼Œè€Œä½¿ç”¨é»˜è®¤æ–¹æ³•ã€‚ä¸ºæ¥å£æ·»åŠ æ–°æ–¹æ³•æ—¶ä¹Ÿå¯ä»¥æ·»åŠ é»˜è®¤æ–¹æ³•ï¼Œé¿å…ç ´åç°æœ‰ç±»çš„å®ç°ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DefaultMethods</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Logging</span> &#123;</span><br><span class="line">        <span class="keyword">void</span> <span class="title function_">log</span><span class="params">(String message)</span>;</span><br><span class="line">        <span class="keyword">default</span> <span class="keyword">void</span> <span class="title function_">log</span><span class="params">(String message, Date date)</span> &#123;</span><br><span class="line">            System.out.println(date.toString() + <span class="string">&quot;: &quot;</span> + message);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoggingImplementation</span> <span class="keyword">implements</span> <span class="title class_">Logging</span> &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">log</span><span class="params">(String message)</span> &#123;</span><br><span class="line">            System.out.println(message);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¯¹äºé™æ€æ–¹æ³•ï¼Œä¸é™æ€æˆå‘˜å˜é‡ç±»ä¼¼ï¼Œåªèƒ½ä½¿ç”¨æ¥å£åè°ƒç”¨ã€‚ä¸é»˜è®¤æ–¹æ³•ç±»ä¼¼ï¼Œå¿…é¡»åœ¨æ¥å£ä¸­æä¾›å®šä¹‰ï¼Œä½†é™æ€æ–¹æ³•ä¸èƒ½è¢«é‡å†™ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StaticMethods</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Logging</span> &#123;</span><br><span class="line">        <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">log</span><span class="params">(String message)</span> &#123;</span><br><span class="line">            System.out.println(message);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        Logging.log(<span class="string">&quot;Hello there&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="1-4-æ–°çš„æ—¥æœŸ-API"><a class="header-anchor" href="#1-4-æ–°çš„æ—¥æœŸ-API">Â¶ </a>1.4 æ–°çš„æ—¥æœŸ API</h2>
<div class="admonition info"><p class="admonition-title"> Docs
</p><p><a target="_blank" rel="noopener" href="https://docs.oracle.com/javase/8/docs/api/java/time/package-summary.html">Package <code>java.time</code></a></p>
</div>
<h3 id="1-4-1-æ—¶é—´ç±»å‹"><a class="header-anchor" href="#1-4-1-æ—¶é—´ç±»å‹">Â¶ </a>1.4.1 æ—¶é—´ç±»å‹</h3>
<p>Java 8 å¼•å…¥äº†ä¸€ä¸ªæ–°çš„æ—¥æœŸå’Œæ—¶é—´ APIï¼Œä½äºåŒ… <code>java.time</code> ä¸­ï¼Œæä¾›äº†æ›´åŠ çµæ´»å’Œæ˜“äºä½¿ç”¨çš„æ—¥æœŸå’Œæ—¶é—´å¤„ç†åŠŸèƒ½ã€‚è¯¥API åœ¨è®¾è®¡ä¸Šéµå¾ªäº†ä¸å¯å˜æ€§å’Œçº¿ç¨‹å®‰å…¨æ€§çš„åŸåˆ™ï¼Œå¹¶ä¸”æä¾›äº†è®¸å¤šæ–¹ä¾¿çš„æ–¹æ³•æ¥å¤„ç†æ—¥æœŸã€æ—¶é—´ã€æ—¶é—´é—´éš”å’Œæ—¶åŒºç­‰ã€‚è§£å†³äº†åŸæœ¬ <code>java.util.Date</code> ä¸­çš„å¾ˆå¤šé—®é¢˜ã€‚</p>
<p><code>java.time</code> ä¸­çš„ä¸»è¦ç±»åŒ…æ‹¬ï¼š</p>
<table>
<thead>
<tr>
<th style="text-align:center">ç±»å</th>
<th style="text-align:center">å†…å®¹</th>
<th style="text-align:center">æ ¼å¼ï¼ˆä¸€ç§å¯èƒ½ï¼‰</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><a target="_blank" rel="noopener" href="https://docs.oracle.com/javase/8/docs/api/java/time/LocalDateTime.html"><code>LocalDateTime</code></a></td>
<td style="text-align:center">æ—¥æœŸ + æ—¶é—´</td>
<td style="text-align:center"><code>yyyy-MM-dd HH:mm:ss.SSS</code></td>
</tr>
<tr>
<td style="text-align:center"><a target="_blank" rel="noopener" href="https://docs.oracle.com/javase/8/docs/api/java/time/LocalDate.html"><code>LocalDate</code></a></td>
<td style="text-align:center">æ—¥æœŸ</td>
<td style="text-align:center"><code>yyyy-MM-dd</code></td>
</tr>
<tr>
<td style="text-align:center"><a target="_blank" rel="noopener" href="https://docs.oracle.com/javase/8/docs/api/java/time/LocalTime.html"><code>LocalTime</code></a></td>
<td style="text-align:center">æ—¶é—´</td>
<td style="text-align:center"><code>HH:mm:ss.SSS</code></td>
</tr>
</tbody>
</table>
<h3 id="1-4-2-åŸºæœ¬ä½¿ç”¨"><a class="header-anchor" href="#1-4-2-åŸºæœ¬ä½¿ç”¨">Â¶ </a>1.4.2 åŸºæœ¬ä½¿ç”¨</h3>
<p><strong>æ—¥æœŸæ ¼å¼åŒ–</strong></p>
<div class='collapse'>
      <div class='collapse-ctrl collapse-cardtitle' onclick='collapseToggle(this)'><div class='collapse-hint-ico'><img style="pointer-events: none;" width="12" height="12" src="/expand.png"/></div><span class='collapse-hint-show'>Show</span><span class='collapse-hint-hide'>Hide</span></div>
      <div class='collapse-content'><div class='content-flex collapse-cardborder'><div>
          <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">newFormat</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">//format yyyy-MM-dd</span></span><br><span class="line">    <span class="type">LocalDate</span> <span class="variable">date</span> <span class="operator">=</span> LocalDate.now();</span><br><span class="line">    System.out.println(String.format(<span class="string">&quot;date format : %s&quot;</span>, date));</span><br><span class="line"></span><br><span class="line">    <span class="comment">//format HH:mm:ss</span></span><br><span class="line">    <span class="type">LocalTime</span> <span class="variable">time</span> <span class="operator">=</span> LocalTime.now().withNano(<span class="number">0</span>);</span><br><span class="line">    System.out.println(String.format(<span class="string">&quot;time format : %s&quot;</span>, time));</span><br><span class="line"></span><br><span class="line">    <span class="comment">//format yyyy-MM-dd HH:mm:ss</span></span><br><span class="line">    <span class="type">LocalDateTime</span> <span class="variable">dateTime</span> <span class="operator">=</span> LocalDateTime.now();</span><br><span class="line">    <span class="type">DateTimeFormatter</span> <span class="variable">dateTimeFormatter</span> <span class="operator">=</span> DateTimeFormatter.ofPattern(<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">dateTimeStr</span> <span class="operator">=</span> dateTime.format(dateTimeFormatter);</span><br><span class="line">    System.out.println(String.format(<span class="string">&quot;dateTime format : %s&quot;</span>, dateTimeStr));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</div></div>
      </div>
  </div>
<p><strong>å­—ç¬¦ä¸²è½¬æ—¥æœŸ</strong></p>
<div class='collapse'>
      <div class='collapse-ctrl collapse-cardtitle' onclick='collapseToggle(this)'><div class='collapse-hint-ico'><img style="pointer-events: none;" width="12" height="12" src="/expand.png"/></div><span class='collapse-hint-show'>Show</span><span class='collapse-hint-hide'>Hide</span></div>
      <div class='collapse-content'><div class='content-flex collapse-cardborder'><div>
          <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">LocalDate</span> <span class="variable">date</span> <span class="operator">=</span> LocalDate.of(<span class="number">2021</span>, <span class="number">1</span>, <span class="number">26</span>);</span><br><span class="line">LocalDate.parse(<span class="string">&quot;2021-01-26&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">LocalDateTime</span> <span class="variable">dateTime</span> <span class="operator">=</span> LocalDateTime.of(<span class="number">2021</span>, <span class="number">1</span>, <span class="number">26</span>, <span class="number">12</span>, <span class="number">12</span>, <span class="number">22</span>);</span><br><span class="line">LocalDateTime.parse(<span class="string">&quot;2021-01-26 12:12:22&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">LocalTime</span> <span class="variable">time</span> <span class="operator">=</span> LocalTime.of(<span class="number">12</span>, <span class="number">12</span>, <span class="number">22</span>);</span><br><span class="line">LocalTime.parse(<span class="string">&quot;12:12:22&quot;</span>);</span><br></pre></td></tr></table></figure>
</div></div>
      </div>
  </div>
<p><strong>æ—¥æœŸè®¡ç®—</strong></p>
<div class='collapse'>
      <div class='collapse-ctrl collapse-cardtitle' onclick='collapseToggle(this)'><div class='collapse-hint-ico'><img style="pointer-events: none;" width="12" height="12" src="/expand.png"/></div><span class='collapse-hint-show'>Show</span><span class='collapse-hint-hide'>Hide</span></div>
      <div class='collapse-content'><div class='content-flex collapse-cardborder'><div>
          <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">////////// è®¡ç®—ä¸€å‘¨åçš„æ—¥æœŸ //////////</span></span><br><span class="line"><span class="type">LocalDate</span> <span class="variable">localDate</span> <span class="operator">=</span> LocalDate.now();</span><br><span class="line"><span class="comment">// æ–¹æ³• 1</span></span><br><span class="line"><span class="type">LocalDate</span> <span class="variable">after</span> <span class="operator">=</span> localDate.plus(<span class="number">1</span>, ChronoUnit.WEEKS);</span><br><span class="line"><span class="comment">// æ–¹æ³• 2</span></span><br><span class="line"><span class="type">LocalDate</span> <span class="variable">after2</span> <span class="operator">=</span> localDate.plusWeeks(<span class="number">1</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;ä¸€å‘¨åæ—¥æœŸï¼š&quot;</span> + after);</span><br><span class="line"></span><br><span class="line"><span class="comment">////////// è®¡ç®—ç®—æ—¥æœŸé—´éš” ///////////</span></span><br><span class="line"><span class="type">LocalDate</span> <span class="variable">date1</span> <span class="operator">=</span> LocalDate.parse(<span class="string">&quot;2021-02-26&quot;</span>);</span><br><span class="line"><span class="type">LocalDate</span> <span class="variable">date2</span> <span class="operator">=</span> LocalDate.parse(<span class="string">&quot;2021-12-23&quot;</span>);</span><br><span class="line"><span class="type">Period</span> <span class="variable">period</span> <span class="operator">=</span> Period.between(date1, date2);</span><br><span class="line">System.out.println(<span class="string">&quot;date1 åˆ° date2 ç›¸éš”ï¼š&quot;</span></span><br><span class="line">                   + period.getYears()  + <span class="string">&quot; å¹´ &quot;</span></span><br><span class="line">                   + period.getMonths() + <span class="string">&quot; æœˆ &quot;</span></span><br><span class="line">                   + period.getDays()   + <span class="string">&quot; å¤©&quot;</span>);</span><br><span class="line"><span class="comment">// æ‰“å°ç»“æœæ˜¯ &quot;date1 åˆ° date2 ç›¸éš”ï¼š0 å¹´ 9 æœˆ 27 å¤©&quot;</span></span><br><span class="line"><span class="comment">// è¿™é‡Œperiod.getDays()å¾—åˆ°çš„å¤©æ˜¯æŠ›å»å¹´æœˆä»¥å¤–çš„å¤©æ•°ï¼Œå¹¶ä¸æ˜¯æ€»å¤©æ•°</span></span><br><span class="line"><span class="comment">// å¦‚æœè¦è·å–çº¯ç²¹çš„æ€»å¤©æ•°åº”è¯¥ç”¨ä¸‹é¢çš„æ–¹æ³•</span></span><br><span class="line"><span class="type">long</span> <span class="variable">day</span> <span class="operator">=</span> date2.toEpochDay() - date1.toEpochDay();</span><br><span class="line">System.out.println(date2 + <span class="string">&quot; å’Œ &quot;</span> + date2 + <span class="string">&quot; ç›¸å·® &quot;</span> + day + <span class="string">&quot; å¤©&quot;</span>);</span><br><span class="line"><span class="comment">// Outputï¼š2021-12-23 å’Œ 2021-12-23 ç›¸å·® 300 å¤©</span></span><br></pre></td></tr></table></figure>
<p><strong>è·å–æŒ‡å®šæ—¥æœŸ</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">LocalDate</span> <span class="variable">today</span> <span class="operator">=</span> LocalDate.now();</span><br><span class="line"><span class="comment">// æœ¬æœˆç¬¬ä¸€å¤©</span></span><br><span class="line"><span class="type">LocalDate</span> <span class="variable">firstDayOfThisMonth</span> <span class="operator">=</span> today.with(TemporalAdjusters.firstDayOfMonth());</span><br><span class="line"><span class="comment">// æœ¬æœˆæœ€åä¸€å¤©</span></span><br><span class="line"><span class="type">LocalDate</span> <span class="variable">lastDayOfThisMonth</span> <span class="operator">=</span> today.with(TemporalAdjusters.lastDayOfMonth());</span><br><span class="line"><span class="comment">// ä¸‹ä¸€å¤©</span></span><br><span class="line"><span class="type">LocalDate</span> <span class="variable">nextDay</span> <span class="operator">=</span> lastDayOfThisMonth.plusDays(<span class="number">1</span>);</span><br><span class="line"><span class="comment">// å½“å¹´æœ€åä¸€å¤©</span></span><br><span class="line"><span class="type">LocalDate</span> <span class="variable">lastday</span> <span class="operator">=</span> today.with(TemporalAdjusters.lastDayOfYear());</span><br><span class="line"><span class="comment">// 2021 å¹´æœ€åä¸€ä¸ªå‘¨æ—¥</span></span><br><span class="line"><span class="type">LocalDate</span> <span class="variable">lastMondayOf2021</span> <span class="operator">=</span> LocalDate.parse(<span class="string">&quot;2021-12-31&quot;</span>)</span><br><span class="line">    .with(TemporalAdjusters.lastInMonth(DayOfWeek.SUNDAY));</span><br></pre></td></tr></table></figure>
</div></div>
      </div>
  </div>
<p><strong>æ—¶åŒº</strong></p>
<div class='collapse'>
      <div class='collapse-ctrl collapse-cardtitle' onclick='collapseToggle(this)'><div class='collapse-hint-ico'><img style="pointer-events: none;" width="12" height="12" src="/expand.png"/></div><span class='collapse-hint-show'>Show</span><span class='collapse-hint-hide'>Hide</span></div>
      <div class='collapse-content'><div class='content-flex collapse-cardborder'><div>
          <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å½“å‰æ—¶åŒºæ—¶é—´</span></span><br><span class="line"><span class="type">ZonedDateTime</span> <span class="variable">zonedDateTime</span> <span class="operator">=</span> ZonedDateTime.now();</span><br><span class="line">System.out.println(<span class="string">&quot;å½“å‰æ—¶åŒºæ—¶é—´: &quot;</span> + zonedDateTime);</span><br><span class="line"><span class="comment">// ä¸œäº¬æ—¶é—´</span></span><br><span class="line"><span class="type">ZoneId</span> <span class="variable">zoneId</span> <span class="operator">=</span> ZoneId.of(ZoneId.SHORT_IDS.get(<span class="string">&quot;JST&quot;</span>));</span><br><span class="line"><span class="type">ZonedDateTime</span> <span class="variable">tokyoTime</span> <span class="operator">=</span> zonedDateTime.withZoneSameInstant(zoneId);</span><br><span class="line">System.out.println(<span class="string">&quot;ä¸œäº¬æ—¶é—´: &quot;</span> + tokyoTime);</span><br><span class="line"><span class="comment">// ZonedDateTime è½¬ LocalDateTime</span></span><br><span class="line"><span class="type">LocalDateTime</span> <span class="variable">localDateTime</span> <span class="operator">=</span> tokyoTime.toLocalDateTime();</span><br><span class="line">System.out.println(<span class="string">&quot;ä¸œäº¬æ—¶é—´è½¬å½“åœ°æ—¶é—´: &quot;</span> + localDateTime);</span><br><span class="line"><span class="comment">// LocalDateTime è½¬ ZonedDateTime</span></span><br><span class="line"><span class="type">ZonedDateTime</span> <span class="variable">localZoned</span> <span class="operator">=</span> localDateTime.atZone(ZoneId.systemDefault());</span><br><span class="line">System.out.println(<span class="string">&quot;æœ¬åœ°æ—¶åŒºæ—¶é—´: &quot;</span> + localZoned);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Output</span></span><br><span class="line"><span class="comment">// å½“å‰æ—¶åŒºæ—¶é—´: 2021-01-27T14:43:58.735+08:00[Asia/Shanghai]</span></span><br><span class="line"><span class="comment">// ä¸œäº¬æ—¶é—´: 2021-01-27T15:43:58.735+09:00[Asia/Tokyo]</span></span><br><span class="line"><span class="comment">// ä¸œäº¬æ—¶é—´è½¬å½“åœ°æ—¶é—´: 2021-01-27T15:43:58.735</span></span><br><span class="line"><span class="comment">// å½“åœ°æ—¶åŒºæ—¶é—´: 2021-01-27T15:53:35.618+08:00[Asia/Shanghai]</span></span><br></pre></td></tr></table></figure>
</div></div>
      </div>
  </div>
<h2 id="1-5-Optional"><a class="header-anchor" href="#1-5-Optional">Â¶ </a>1.5 Optional</h2>
<div class="admonition info"><p class="admonition-title"> Docs
</p><p><a target="_blank" rel="noopener" href="https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html">Class <code>Optional&lt;T&gt;</code></a></p>
</div>
<p>Java 8 ä¸­é€šè¿‡å¼•å…¥ <code>Optional</code>ï¼Œç”¨äºè§£å†³åœ¨å¤„ç†å¯èƒ½ä¸º <code>null</code> çš„å€¼æ—¶å‡ºç°çš„ <code>NullPointerException</code>ã€‚<code>Optional</code> ç±»çš„è®¾è®¡ç›®æ ‡æ˜¯é¼“åŠ±æ›´å¥½çš„ç¼–ç¨‹å®è·µï¼Œæ˜ç¡®è¡¨ç¤ºä¸€ä¸ªå€¼å¯èƒ½ä¸ºç©ºï¼Œå¹¶é¼“åŠ±å¼€å‘äººå‘˜åœ¨ä½¿ç”¨è¿™äº›å¯èƒ½ä¸ºç©ºçš„å€¼æ—¶è¿›è¡Œæ˜¾å¼çš„å¤„ç†ã€‚<code>Optional</code> ç±»æ˜¯ä¸€ä¸ªå®¹å™¨å¯¹è±¡ï¼Œå¯ä»¥åŒ…å«ä¸€ä¸ªéç©ºçš„å€¼æˆ–è€…æ²¡æœ‰å€¼ï¼ˆ<code>null</code>ï¼‰ã€‚</p>
<p><code>Optional</code> çš„ç®€å•ä½¿ç”¨ç¤ºä¾‹å¦‚ä¸‹ï¼Œæ›´å¤šæ–¹æ³•å¯å‚è€ƒå®˜æ–¹æ–‡æ¡£æˆ–æºç ã€‚</p>
<div class='collapse'>
      <div class='collapse-ctrl collapse-cardtitle' onclick='collapseToggle(this)'><div class='collapse-hint-ico'><img style="pointer-events: none;" width="12" height="12" src="/expand.png"/></div><span class='collapse-hint-show'>Show</span><span class='collapse-hint-hide'>Hide</span></div>
      <div class='collapse-content'><div class='content-flex collapse-cardborder'><div>
          <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Optional;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OptionalDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">value</span> <span class="operator">=</span> <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// åˆ›å»ºä¸€ä¸ªåŒ…å«éç©ºå€¼çš„ Optional å¯¹è±¡</span></span><br><span class="line">        Optional&lt;String&gt; optional = Optional.of(value);</span><br><span class="line">        <span class="comment">// åˆ›å»ºå¯èƒ½åŒ…å«ç©ºå€¼çš„ Optional éœ€è¦ä½¿ç”¨ ofNullable</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// åˆ¤æ–­ Optional å¯¹è±¡æ˜¯å¦åŒ…å«å€¼</span></span><br><span class="line">        <span class="keyword">if</span> (optional.isPresent()) &#123;</span><br><span class="line">            <span class="comment">// è·å– Optional å¯¹è±¡ä¸­çš„å€¼</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> optional.get();</span><br><span class="line">            System.out.println(<span class="string">&quot;Value: &quot;</span> + result);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è·å– Optional å¯¹è±¡ä¸­çš„å€¼ï¼Œå¦‚æœæ²¡æœ‰å€¼ï¼Œåˆ™è¿”å›é»˜è®¤å€¼</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">defaultValue</span> <span class="operator">=</span> optional.orElse(<span class="string">&quot;Default Value&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;Default Value: &quot;</span> + defaultValue);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¯¹ Optional å¯¹è±¡ä¸­çš„å€¼è¿›è¡Œè½¬æ¢</span></span><br><span class="line">        Optional&lt;String&gt; transformed = optional.map(String::toUpperCase);</span><br><span class="line">        <span class="keyword">if</span> (transformed.isPresent()) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Transformed Value: &quot;</span> + transformed.get());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Output</span></span><br><span class="line"><span class="comment">// Value: Hello</span></span><br><span class="line"><span class="comment">// Default Value: Hello</span></span><br><span class="line"><span class="comment">// Transformed Value: HELLO</span></span><br></pre></td></tr></table></figure>
</div></div>
      </div>
  </div>
<hr>
<h1 id="2-Java-9"><a class="header-anchor" href="#2-Java-9">Â¶ </a>2. Java 9</h1>
<h2 id="2-1-Try-with-resources"><a class="header-anchor" href="#2-1-Try-with-resources">Â¶ </a>2.1 Try-with-resources*</h2>
<p><code>try-with-resources</code> ç”¨äºåœ¨ä»£ç å—ç»“æŸæ—¶è‡ªåŠ¨å…³é—­å®ç° <code>AutoCloseable</code> æ¥å£çš„èµ„æºã€‚è¿™ä¸€æ¦‚å¿µåœ¨ Java 7 ä¸­è¢«æå‡ºã€‚Java 9 å¯¹ <code>try-with-resources</code> è¿›è¡Œäº†æ”¹è¿›ï¼Œä½¿å…¶æ›´åŠ ä¾¿åˆ©å’Œçµæ´»ã€‚</p>
<p>åœ¨ Java 9 ä¹‹å‰ï¼Œæˆ‘ä»¬åªèƒ½åœ¨ <code>try-with-resources</code> å—ä¸­å£°æ˜å˜é‡ï¼Œå¦‚ä¸‹ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> (<span class="type">Scanner</span> <span class="variable">scanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;testRead.txt&quot;</span>));</span><br><span class="line">    <span class="type">PrintWriter</span> <span class="variable">writer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PrintWriter</span>(<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;testWrite.txt&quot;</span>))) &#123;</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<div class="admonition note"><p class="admonition-title">Note</p><p>å¯ä»¥åœ¨ <code>try-with-resource</code> ä¸­ <code>try</code> åçš„æ‹¬å·é‡Œç”¨ <code>;</code> åˆ†éš”å¤šæ¡å£°æ˜è¯­å¥ã€‚ğŸ¤”</p>
</div>
<p>åœ¨ Java 9 ä¹‹åï¼Œåœ¨ <code>try-with-resources</code> è¯­å¥ä¸­å¯ä»¥ä½¿ç”¨ final æˆ– effectively-final å˜é‡ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> <span class="type">Scanner</span> <span class="variable">scanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;testRead.txt&quot;</span>));</span><br><span class="line"><span class="type">PrintWriter</span> <span class="variable">writer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PrintWriter</span>(<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;testWrite.txt&quot;</span>));</span><br><span class="line"><span class="keyword">try</span> (scanner; writer) &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<div class="admonition note"><p class="admonition-title">Note</p><p>effectively-final ç®€å•æ¥è¯´å°±æ˜¯æ²¡æœ‰è¢« <code>final</code> ä¿®é¥°ï¼Œä½†æ˜¯å€¼åœ¨åˆå§‹åŒ–åä»æœªæ›´æ”¹çš„å˜é‡ã€‚</p>
</div>
<h2 id="2-2-é’»çŸ³æ“ä½œç¬¦ï¼ˆDiamond-Operatorï¼‰"><a class="header-anchor" href="#2-2-é’»çŸ³æ“ä½œç¬¦ï¼ˆDiamond-Operatorï¼‰">Â¶ </a>2.2 é’»çŸ³æ“ä½œç¬¦ï¼ˆDiamond Operatorï¼‰*</h2>
<p>é’»çŸ³æ“ä½œç¬¦æ˜¯ Java 7 ä¸­å¼•å…¥çš„è¯­æ³•ç³–ï¼Œç”¨äºåœ¨å®ä¾‹åŒ–æ³›å‹ç±»æ—¶çœç•¥ç±»å‹å‚æ•°çš„é‡å¤å£°æ˜ã€‚ä½†æ˜¯ï¼Œåœ¨ Java 9 ä¹‹å‰ï¼Œæˆ‘ä»¬ä¸èƒ½åœ¨å®ä¾‹åŒ–å†…éƒ¨åŒ¿åç±»æ—¶ä½¿ç”¨é’»çŸ³æ“ä½œç¬¦ã€‚å› æ­¤ï¼Œå¦‚ä¸‹ä»£ç åªèƒ½åœ¨ Java 9 ä¹‹åçš„ç‰ˆæœ¬ä¸­é€šè¿‡ç¼–è¯‘ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DiamondOperator</span> &#123;</span><br><span class="line">    <span class="comment">// å®ä¾‹åŒ–å†…éƒ¨åŒ¿åç±»æ—¶ä½¿ç”¨ &lt;&gt;</span></span><br><span class="line">    StringAppender&lt;String&gt; appending = <span class="keyword">new</span> <span class="title class_">StringAppender</span>&lt;&gt;() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> String <span class="title function_">append</span><span class="params">(String a, String b)</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>(a).append(<span class="string">&quot;-&quot;</span>).append(b).toString();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">StringAppender</span>&lt;T&gt; &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">abstract</span> T <span class="title function_">append</span><span class="params">(String a, String b)</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="2-3-ç§æœ‰æ¥å£æ–¹æ³•"><a class="header-anchor" href="#2-3-ç§æœ‰æ¥å£æ–¹æ³•">Â¶ </a>2.3 ç§æœ‰æ¥å£æ–¹æ³•</h2>
<p>Java 8 ä¸­å…è®¸æ¥å£å®ç°é»˜è®¤æ–¹æ³•ï¼Œåœ¨ Java 9 ä¸­è¿›ä¸€æ­¥å…è®¸æ¥å£å®ç°ç§æœ‰æ–¹æ³•ã€‚æ¥å£çš„ç§æœ‰çš„æ–¹æ³•å¿…é¡»åœ¨æ¥å£å£°æ˜ä¸­å®ç°ï¼Œå¹¶ä¸”åªèƒ½åœ¨æ¥å£å†…éƒ¨è¢«è°ƒç”¨ï¼Œå¯¹äºæ¥å£çš„å®ç°ç±»å’Œå…¶ä»–ç±»æ˜¯ä¸å¯è§çš„ã€‚è¿™å°±æ„å‘³ç€ï¼Œåªæœ‰æ¥å£çš„é»˜è®¤æ–¹æ³•å¯ä»¥è°ƒç”¨æ¥å£çš„ç§æœ‰æ–¹æ³•ã€‚æ¥å£çš„ç§æœ‰æ–¹æ³•å¯ä»¥ä½œä¸ºé»˜è®¤æ–¹æ³•çš„è¾…åŠ©ï¼Œç®€åŒ–ä»£ç ï¼Œæé«˜å¯è¯»æ€§ã€‚</p>
<p>æ¥å£ç§æœ‰æ–¹æ³•çš„ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ã€‚</p>
<div class='collapse'>
      <div class='collapse-ctrl collapse-cardtitle' onclick='collapseToggle(this)'><div class='collapse-hint-ico'><img style="pointer-events: none;" width="12" height="12" src="/expand.png"/></div><span class='collapse-hint-show'>Show</span><span class='collapse-hint-hide'>Hide</span></div>
      <div class='collapse-content'><div class='content-flex collapse-cardborder'><div>
          <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PrivateInterfaceMethods</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">TestingNames</span> <span class="variable">names</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TestingNames</span>();</span><br><span class="line">        System.out.println(names.fetchInitialData());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">TestingNames</span> <span class="keyword">implements</span> <span class="title class_">NamesInterface</span> &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">TestingNames</span><span class="params">()</span> &#123;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">NamesInterface</span> &#123;</span><br><span class="line">        <span class="keyword">default</span> List&lt;String&gt; <span class="title function_">fetchInitialData</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> (<span class="type">BufferedReader</span> <span class="variable">br</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(<span class="built_in">this</span>.getClass().getResourceAsStream(<span class="string">&quot;/names.txt&quot;</span>)))) &#123;</span><br><span class="line">                <span class="comment">// è°ƒç”¨æ¥å£çš„ç§æœ‰æ–¹æ³•</span></span><br><span class="line">                <span class="keyword">return</span> readNames(br);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å£°æ˜å¹¶å®ç°ç§æœ‰æ–¹æ³•</span></span><br><span class="line">        <span class="keyword">private</span> List&lt;String&gt; <span class="title function_">readNames</span><span class="params">(BufferedReader br)</span></span><br><span class="line">            <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">            ArrayList&lt;String&gt; names = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">            String name;</span><br><span class="line">            <span class="keyword">while</span> ((name = br.readLine()) != <span class="literal">null</span>) &#123;</span><br><span class="line">                names.add(name);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> names;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</div></div>
      </div>
  </div>
<h2 id="2-4-æ¨¡å—åŒ–ç³»ç»Ÿï¼ˆModule-Systemï¼‰"><a class="header-anchor" href="#2-4-æ¨¡å—åŒ–ç³»ç»Ÿï¼ˆModule-Systemï¼‰">Â¶ </a>2.4 æ¨¡å—åŒ–ç³»ç»Ÿï¼ˆModule Systemï¼‰</h2>
<div class="admonition info"><p class="admonition-title"> Docs
</p><ul>
<li>
<p><a target="_blank" rel="noopener" href="https://openjdk.org/jeps/261">JEP 261: Module System</a></p>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://www.oracle.com/corporate/features/understanding-java-9-modules.html">Understanding Java 9 Modules</a></p>
</li>
</ul>
</div>
<p>æ¨¡å—åŒ–ç³»ç»Ÿä¹Ÿç§°ä¸º Java å¹³å°æ¨¡å—ç³»ç»Ÿï¼ˆJava Platform Module Systemï¼ŒJPMSï¼‰ã€‚è¯¥ç‰¹æ€§çš„ç›®æ ‡æ˜¯æ”¹å–„ Java å¹³å°çš„å¯ä¼¸ç¼©æ€§ã€å®‰å…¨æ€§å’Œæ€§èƒ½ã€‚ æ¨¡å—åŒ–ç³»ç»Ÿçš„ä¸»è¦æ€æƒ³æ˜¯å°† Java å¹³å°åˆ†è§£ä¸ºä¸€ç³»åˆ—æ¨¡å—ï¼Œæ¯ä¸ªæ¨¡å—éƒ½æœ‰è‡ªå·±çš„å°è£…å’Œä¾èµ–å…³ç³»ï¼Œä¹Ÿå¯ä»¥è¢«ç»„åˆåœ¨ä¸€èµ·ï¼Œä»¥æ„å»ºæ›´å¤§çš„åº”ç”¨ç¨‹åºæˆ–åº“ã€‚</p>
<p>å¯¹äºæ¨¡å—çš„å£°æ˜ï¼Œå…¶åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼Œé€šè¿‡ <code>exports</code> å…³é”®è¯è¿˜å¯ä»¥ç²¾å‡†æ§åˆ¶å“ªäº›ç±»å¯ä»¥å¯¹å¤–å¼€æ”¾ä½¿ç”¨ï¼Œå“ªäº›ç±»åªèƒ½å†…éƒ¨ä½¿ç”¨ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> demo.core &#123;</span><br><span class="line">    <span class="comment">// éœ€è¦çš„æ¨¡å—</span></span><br><span class="line">    <span class="keyword">requires</span> demo.data;</span><br><span class="line">    <span class="comment">// æš´éœ²çš„æ¨¡å—</span></span><br><span class="line">    <span class="keyword">exports</span> com.demo.core;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">module</span> demo.data &#123;</span><br><span class="line">    <span class="comment">// å…¬å¼€åŒ…å†…çš„æ‰€æœ‰å…¬å…±æˆå‘˜</span></span><br><span class="line">    export com.demo.data.table;</span><br><span class="line">    <span class="comment">// é™åˆ¶è®¿é—®æˆå‘˜èŒƒæ–‡ï¼Œä»…å¯¹æŸäº›åŒ…å…¬å¼€</span></span><br><span class="line">    export com.demo.data.secret to com.demo.core;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ›´è¯¦ç»†çš„è§£é‡Šå¯å‚è€ƒï¼š<a target="_blank" rel="noopener" href="https://www.cnblogs.com/IcanFixIt/p/6947763.html">Java 9 æ­ç§˜ï¼ˆ2. æ¨¡å—åŒ–ç³»ç»Ÿï¼‰</a></p>
<h2 id="2-5-é›†åˆå·¥å‚æ–¹æ³•"><a class="header-anchor" href="#2-5-é›†åˆå·¥å‚æ–¹æ³•">Â¶ </a>2.5 é›†åˆå·¥å‚æ–¹æ³•</h2>
<p>Java 9 ä¸ºé›†åˆæ¡†æ¶å¼•å…¥äº†ä¸€ç»„æ–°çš„å·¥å‚æ–¹æ³•ï¼Œä½¿åˆ›å»ºå’Œåˆå§‹åŒ–<strong>ä¸å¯å˜é›†åˆ</strong>å¯¹è±¡æ›´åŠ ç®€æ´å’Œæ–¹ä¾¿ã€‚è¿™äº›å·¥å‚æ–¹æ³•å±äº <code>java.util</code> åŒ…ä¸­çš„ <code>List</code>ã€<code>Set</code> å’Œ <code>Map</code> æ¥å£ï¼Œç”¨äºåˆ›å»ºä¸å¯å˜çš„é›†åˆå¯¹è±¡ã€‚é›†åˆå·¥å‚æ–¹æ³•åå‡ä¸º <code>of</code>ï¼Œä»¥ä¸‹æ˜¯å…¶åœ¨ä¸åŒé›†åˆä¸­çš„ä½¿ç”¨æ–¹å¼ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">List&lt;String&gt; fruits = List.of(<span class="string">&quot;Apple&quot;</span>, <span class="string">&quot;Banana&quot;</span>, <span class="string">&quot;Orange&quot;</span>);</span><br><span class="line">Set&lt;Integer&gt; numbers = Set.of(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>);</span><br><span class="line">Map&lt;String, Integer&gt; studentScores = Map.of(<span class="string">&quot;Alice&quot;</span>, <span class="number">95</span>, <span class="string">&quot;Bob&quot;</span>, <span class="number">80</span>, <span class="string">&quot;Charlie&quot;</span>, <span class="number">90</span>);</span><br></pre></td></tr></table></figure>
<div class="admonition error"><p class="admonition-title">Danger
</p><p>é›†åˆå·¥å‚æ–¹æ³•è¿”å›çš„æ˜¯ <code>ImmutableCollections</code>ï¼Œå³ä¸å¯å˜é›†åˆã€‚å› æ­¤å¦‚æœä½ å°è¯•ä¿®æ”¹å…¶è¿”å›å€¼ï¼Œé‚£ä¹ˆæ­å–œä½ å°†è·å¾—å…¶æŠ›å‡ºçš„ <code>UnsupportedOperationException</code>ã€‚ğŸ¥³</p>
</div>
<h2 id="2-6-Stream-API"><a class="header-anchor" href="#2-6-Stream-API">Â¶ </a>2.6 Stream API*</h2>
<p>Java 9 ä¸­ä¸º <code>Stream</code> ç±»æ·»åŠ äº†ä¸€äº›æ›´æ–¹ä¾¿çš„æ–¹æ³•ã€‚</p>
<ul>
<li><code>default Stream&lt;T&gt; takeWhile(Predicate&lt;T&gt; predicate)</code>ï¼šè¿”å›ä»æµå¼€å¤´å¼€å§‹çš„è¿ç»­å…ƒç´ ï¼Œç›´åˆ°é‡åˆ°ç¬¬ä¸€ä¸ªä¸æ»¡è¶³ç»™å®šæ¡ä»¶çš„å…ƒç´ ã€‚<br>
<code>default Stream&lt;T&gt; takeWhile(Predicate&lt;T&gt; predicate)</code>ï¼šè¿”å›ä»æµçš„å¼€å¤´å¼€å§‹è·³è¿‡æ»¡è¶³ç»™å®šæ¡ä»¶çš„è¿ç»­å…ƒç´ ï¼Œç›´åˆ°é‡åˆ°ç¬¬ä¸€ä¸ªä¸æ»¡è¶³æ¡ä»¶çš„å…ƒç´ ã€‚</li>
<li><code>static &lt;T&gt; Stream&lt;T&gt; ofNullable(T t)</code>ï¼šå¦‚æœæä¾›çš„å…ƒç´ ä¸ºç©ºï¼ˆ<code>null</code>ï¼‰ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªç©ºçš„ <code>Steam</code>ï¼›å¦åˆ™ï¼Œå°†åˆ›å»ºä¸€ä¸ªåŒ…å«è¯¥å…ƒç´ çš„ <code>Stream</code>ã€‚</li>
<li><code>static &lt;T&gt; Stream&lt;T&gt; iterate(T seed, Predicate&lt;T&gt; hasNext, UnaryOperator&lt;T&gt; next)</code>ï¼šé‡è½½çš„ <code>iterate</code> æ–¹æ³•ç°åœ¨æ”¯æŒå°† <code>Predicate</code> ä½œä¸ºç»ˆæ­¢è¿­ä»£çš„æ¡ä»¶ã€‚</li>
</ul>
<p>Stream API ä¸­æ–°å¢æ–¹æ³•çš„ç¤ºä¾‹å¦‚ä¸‹ã€‚</p>
<div class='collapse'>
      <div class='collapse-ctrl collapse-cardtitle' onclick='collapseToggle(this)'><div class='collapse-hint-ico'><img style="pointer-events: none;" width="12" height="12" src="/expand.png"/></div><span class='collapse-hint-show'>Show</span><span class='collapse-hint-hide'>Hide</span></div>
      <div class='collapse-content'><div class='content-flex collapse-cardborder'><div>
          <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.stream.Collectors;</span><br><span class="line"><span class="keyword">import</span> java.util.stream.Stream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StreamApiDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// takeWhile() æ–¹æ³•ç¤ºä¾‹</span></span><br><span class="line">        List&lt;Integer&gt; smallNumbers = Stream.of(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>)</span><br><span class="line">            .takeWhile(n -&gt; n &lt; <span class="number">4</span>)</span><br><span class="line">            .collect(Collectors.toList());</span><br><span class="line">        System.out.println(smallNumbers);</span><br><span class="line">        <span class="comment">// Output: [1, 2, 3]</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// dropWhile() æ–¹æ³•ç¤ºä¾‹</span></span><br><span class="line">        List&lt;Integer&gt; largeNumbers = Stream.of(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>)</span><br><span class="line">            .dropWhile(n -&gt; n &lt; <span class="number">4</span>)</span><br><span class="line">            .collect(Collectors.toList());</span><br><span class="line">        System.out.println(largeNumbers);</span><br><span class="line">        <span class="comment">// Output: [4, 5, 6]</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// ofNullable() æ–¹æ³•ç¤ºä¾‹</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        List&lt;String&gt; names = Stream.ofNullable(name)</span><br><span class="line">            .collect(Collectors.toList());</span><br><span class="line">        System.out.println(names);</span><br><span class="line">        <span class="comment">// Output: []</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// iterate() æ–¹æ³•çš„é‡è½½ç¤ºä¾‹</span></span><br><span class="line">        List&lt;Integer&gt; evenNumbers = Stream.iterate(<span class="number">0</span>, n -&gt; n &lt; <span class="number">10</span>, n -&gt; n + <span class="number">2</span>)</span><br><span class="line">            .collect(Collectors.toList());</span><br><span class="line">        System.out.println(evenNumbers);</span><br><span class="line">        <span class="comment">// Output: [0, 2, 4, 6, 8]</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</div></div>
      </div>
  </div>
<div class="admonition info"><p class="admonition-title">Info</p><p>å…³äºè¿­ä»£å™¨çš„æ›´å¤šå†…å®¹å¯ä»¥å‚è€ƒï¼š<a target="_blank" rel="noopener" href="https://javadeveloperzone.com/java-9/java-9-stream-iterate/">Java 9 Steam iterate</a></p>
</div>
<h2 id="2-7-è¿›ç¨‹-API"><a class="header-anchor" href="#2-7-è¿›ç¨‹-API">Â¶ </a>2.7 è¿›ç¨‹ API*</h2>
<p>Java 9 å¯¹è¿›ç¨‹ API è¿›è¡Œäº†ä¸€äº›æ”¹è¿›ï¼Œä»¥æä¾›æ›´å¥½çš„æ§åˆ¶å’Œç®¡ç†åº”ç”¨ç¨‹åºçš„è¿›ç¨‹ã€‚è¿™äº›æ”¹è¿›ä¸»è¦é›†ä¸­åœ¨ <code>java.lang.Process</code> ç±»å’Œç›¸å…³ç±»çš„å¢å¼ºï¼Œå…¶ä¸»è¦æ”¹åŠ¨å¦‚ä¸‹ã€‚</p>
<ul>
<li>å¼•å…¥äº† <code>ProcessHandle</code> ç±»ï¼Œä»£è¡¨ä¸€ä¸ªæœ¬åœ°æ“ä½œç³»ç»Ÿè¿›ç¨‹çš„å¥æŸ„ã€‚é€šè¿‡ <code>ProcessHandle</code> ç±»å¯ä»¥è·å–è¿›ç¨‹çš„ PIDï¼ˆè¿›ç¨‹æ ‡è¯†ç¬¦ï¼‰ã€çˆ¶è¿›ç¨‹çš„å¥æŸ„ã€å­è¿›ç¨‹çš„å¥æŸ„ä»¥åŠå…¶ä»–è¿›ç¨‹ç›¸å…³çš„ä¿¡æ¯ã€‚å…¶ <code>info()</code> æ–¹æ³•å¯ä»¥è¿”å›ä¸€ä¸ª <code>ProcessHandle.Info</code> å¯¹è±¡ï¼Œä»¥æä¾›æœ‰å…³è¿›ç¨‹çš„è¯¦ç»†ä¿¡æ¯ï¼Œå¦‚è¿›ç¨‹çš„å‘½ä»¤è¡Œå‚æ•°ã€å¯åŠ¨æ—¶é—´ã€ç´¯è®¡ CPU æ—¶é—´ç­‰ã€‚</li>
<li>æ”¹è¿›äº† <code>ProcessBuilder</code> ç±»ï¼Œæ·»åŠ äº†ä¸€äº›æ–°çš„æ–¹æ³•ï¼Œä¾‹å¦‚ <code>inheritIO()</code> æ–¹æ³•ï¼Œå®ƒå…è®¸å­è¿›ç¨‹ç»§æ‰¿çˆ¶è¿›ç¨‹çš„æ ‡å‡†è¾“å…¥ã€è¾“å‡ºå’Œé”™è¯¯æµã€‚è¿˜æ·»åŠ äº† <code>redirectInput()ã€redirectOutput() å’Œ redirectError()</code> æ–¹æ³•ï¼Œç”¨äºé‡å®šå‘å­è¿›ç¨‹çš„æ ‡å‡†è¾“å…¥ã€è¾“å‡ºå’Œé”™è¯¯æµã€‚</li>
<li>ä¸º <code>Process</code> ç±»æ·»åŠ äº† <code>destroyForcibly()</code> æ–¹æ³•ï¼Œç”¨äºå¼ºåˆ¶ç»ˆæ­¢è¿›ç¨‹ï¼Œæ— è®ºè¿›ç¨‹æ˜¯å¦å“åº”ã€‚è¿™ä¸ <code>destroy()</code> æ–¹æ³•çš„åŒºåˆ«åœ¨äºï¼Œ<code>destroy()</code> æ–¹æ³•ä¼šå°è¯•ä¼˜é›…åœ°ç»ˆæ­¢è¿›ç¨‹ï¼Œè€Œ <code>destroyForcibly()</code> æ–¹æ³•ä¼šå¼ºåˆ¶ç»ˆæ­¢è¿›ç¨‹ã€‚</li>
</ul>
<p><code>ProcessHandle</code> çš„åŸºæœ¬ç”¨æ³•å¦‚ä¸‹ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ProcessInfoDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// è·å–å½“å‰è¿›ç¨‹çš„ ProcessHandle</span></span><br><span class="line">        <span class="type">ProcessHandle</span> <span class="variable">currentProcess</span> <span class="operator">=</span> ProcessHandle.current();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è·å–å½“å‰è¿›ç¨‹çš„ PID</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">pid</span> <span class="operator">=</span> currentProcess.pid();</span><br><span class="line">        System.out.println(<span class="string">&quot;å½“å‰è¿›ç¨‹çš„ PIDï¼š&quot;</span> + pid);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è·å–å½“å‰è¿›ç¨‹çš„ä¿¡æ¯</span></span><br><span class="line">        ProcessHandle.<span class="type">Info</span> <span class="variable">processInfo</span> <span class="operator">=</span> currentProcess.info();</span><br><span class="line">        System.out.println(<span class="string">&quot;å‘½ä»¤è¡Œï¼š&quot;</span> + processInfo.command().orElse(<span class="string">&quot;&quot;</span>));</span><br><span class="line">        System.out.println(<span class="string">&quot;å¯åŠ¨æ—¶é—´ï¼š&quot;</span> + processInfo.startInstant().orElse(<span class="literal">null</span>));</span><br><span class="line">        System.out.println(<span class="string">&quot;ç´¯è®¡ CPU æ—¶é—´ï¼š&quot;</span> + processInfo.totalCpuDuration().orElse(<span class="literal">null</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="2-8-JShell"><a class="header-anchor" href="#2-8-JShell">Â¶ </a>2.8 JShell</h2>
<p>Java 9 å¼•å…¥äº†ä¸€ä¸ªåä¸º JShell çš„å‘½ä»¤è¡Œäº¤äº’å·¥å…·ï¼Œå…¶ç±»ä¼¼äº Python çš„å‘½ä»¤è¡Œæ¨¡å¼ï¼Œæä¾›äº†ä¸€ä¸ªæ–¹ä¾¿çš„æ–¹å¼æ¥è¿›è¡Œ Java ä»£ç çš„å®æ—¶äº¤äº’å¼æ¢ç´¢å’Œå®éªŒï¼Œç®€å•çš„ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ã€‚JShell æ”¯æŒ Tab é”®æ˜¾ç¤ºè¡¥å…¨æç¤ºï¼Œç¤ºä¾‹ä¸­çš„ â€œ[Tab]â€ æŒ‡æŒ‰ Tab é”®ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">$ jshell</span><br><span class="line">|  Welcome to JShell -- Version 17.0.5</span><br><span class="line">|  For an introduction <span class="built_in">type</span>: /help intro</span><br><span class="line"></span><br><span class="line">jshell&gt; String greeting = <span class="string">&quot;Hello there!&quot;</span>;</span><br><span class="line">greeting ==&gt; <span class="string">&quot;Hello there!&quot;</span></span><br><span class="line"></span><br><span class="line">jshell&gt; System.out.pr[Tab]</span><br><span class="line"><span class="built_in">print</span>(     <span class="built_in">printf</span>(    println(</span><br><span class="line">jshell&gt; System.out.println(greeting);</span><br><span class="line">Hello there!</span><br><span class="line"></span><br><span class="line">jshell&gt; /exit</span><br><span class="line">|  Goodbye</span><br><span class="line"></span><br><span class="line">$ </span><br></pre></td></tr></table></figure>
<hr>
<h1 id="3-Java-10"><a class="header-anchor" href="#3-Java-10">Â¶ </a>3. Java 10</h1>
<div class="admonition info"><p class="admonition-title">More
</p><p><a target="_blank" rel="noopener" href="https://www.happycoders.eu/java/java-10-features/">Java 10 Features</a></p>
</div>
<h2 id="3-1-å±€éƒ¨å˜é‡ç±»å‹æ¨æ–­"><a class="header-anchor" href="#3-1-å±€éƒ¨å˜é‡ç±»å‹æ¨æ–­">Â¶ </a>3.1 å±€éƒ¨å˜é‡ç±»å‹æ¨æ–­</h2>
<p>Java ä½œä¸ºå¼ºç±»å‹è¯­è¨€ï¼Œå£°æ˜å˜é‡æ—¶å¿…é¡»æ˜ç¡®æŒ‡å‡ºç±»å‹ã€‚Java 10 å¼•å…¥äº† <code>var</code> å…³é”®å­—å®ç°å±€éƒ¨å˜é‡ç±»å‹æ¨æ–­ï¼Œå¯ä»¥è®©ç¼–è¯‘å™¨æ ¹æ®ä¸Šä¸‹æ–‡è‡ªåŠ¨æ¨æ–­å˜é‡çš„ç±»å‹ï¼Œä½¿ä»£ç æ›´åŠ ç®€æ´ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å£°æ˜å±€éƒ¨å˜é‡çš„ä¸¤ç§ç­‰ä»·å†™æ³•</span></span><br><span class="line">List&lt;Integer&gt; explicitList = List.of(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>);</span><br><span class="line"><span class="type">var</span> <span class="variable">implicitList</span> <span class="operator">=</span> List.of(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>);</span><br></pre></td></tr></table></figure>
<div class="admonition warning"><p class="admonition-title">Warning</p><p>å°½ç®¡ <code>var</code> ä½¿ä»£ç æ›´åŠ ç®€æ´ï¼Œä½†ä¹Ÿä¸åº”æ»¥ç”¨ï¼Œå¯¼è‡´å¯è¯»æ€§ä¸‹é™ã€‚ä¸€èˆ¬ä½¿ç”¨åœºæ™¯æ˜¯åŸºæœ¬ç±»å‹ï¼ˆå¦‚ <code>int</code>ã€<code>String</code>ï¼‰çš„å£°æ˜ï¼Œä»¥åŠæ¥æ”¶æ˜¾è€Œæ˜“è§çš„è¿”å›ç±»å‹ï¼ˆå¦‚ <code>List.of</code>ï¼‰ã€‚</p>
</div>
<h2 id="3-2-Collections-å’Œ-Stream-API"><a class="header-anchor" href="#3-2-Collections-å’Œ-Stream-API">Â¶ </a>3.2 Collections å’Œ Stream API*</h2>
<p>Java 10 ä¸­ï¼Œä¸ºé›†åˆä¸æµå¢åŠ äº†åˆ›å»º<strong>ä¸å¯å˜å¯¹è±¡</strong>çš„æ”¯æŒã€‚</p>
<p>é›†åˆæ¥å£ï¼ˆ<code>List</code>ï¼Œ<code>Set</code>ï¼Œ<code>Map</code>ï¼‰ä¸­æä¾›äº†æ–°çš„é™æ€æ–¹æ³•è¿”å›é›†åˆçš„<strong>ä¸å¯å˜æ‹·è´</strong>ã€‚ä¾‹å¦‚ï¼Œ<code>List</code> ä¸­è¯¥æ–¹æ³•çš„å®šä¹‰å¦‚ä¸‹ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> &lt;E&gt; List&lt;E&gt; <span class="title function_">copyOf</span><span class="params">(Collection&lt;? extends E&gt; coll)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> ImmutableCollections.listCopy(coll);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>java.util.stream.Collectors</code> ä¸­æ–°å¢äº†é™æ€æ–¹æ³•ï¼Œç”¨äºå°†æµä¸­çš„å…ƒç´ æ”¶é›†ä¸º<strong>ä¸å¯å˜é›†åˆ</strong>ï¼ŒåŸºæœ¬ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">var</span> <span class="variable">list</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Integer&gt;();</span><br><span class="line">list.stream().collect(Collectors.toUnmodifiableList());</span><br><span class="line">list.stream().collect(Collectors.toUnmodifiableSet());</span><br></pre></td></tr></table></figure>
<h2 id="3-3-Optional"><a class="header-anchor" href="#3-3-Optional">Â¶ </a>3.3 Optional*</h2>
<p><code>Optional</code> ç±»æ–°å¢äº† <code>orElseThrow()</code> æ–¹æ³•åœ¨å€¼ä¸ºç©ºæ—¶æŠ›å‡ºæŒ‡å®šå¼‚å¸¸ï¼Œä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">var</span> <span class="variable">value</span> <span class="operator">=</span> nullableObject.orElseThrow(NullPointerException::<span class="keyword">new</span>);</span><br><span class="line"><span class="comment">// ç­‰ä»·äº</span></span><br><span class="line"><span class="type">var</span> <span class="variable">value</span> <span class="operator">=</span> nullableObject.orElseThrow(() -&gt; <span class="keyword">new</span> <span class="title class_">NullPointerException</span>());</span><br></pre></td></tr></table></figure>
<div class="admonition note"><p class="admonition-title">note</p><p>è¿™é‡Œä½¿ç”¨äº†æ–¹æ³•å¼•ç”¨ï¼Œå¿˜è®°çš„è¯å¯ä»¥ç‚¹è¿™é‡Œï¼š<a href="#1-2-%E6%96%B9%E6%B3%95%E5%BC%95%E7%94%A8%EF%BC%88Method-Reference%EF%BC%89">æ–¹æ³•å¼•ç”¨</a>ã€‚ğŸ«¡</p>
</div>
<h2 id="3-4-å¹¶è¡Œ-Full-GC-ç®—æ³•"><a class="header-anchor" href="#3-4-å¹¶è¡Œ-Full-GC-ç®—æ³•">Â¶ </a>3.4 å¹¶è¡Œ Full GC ç®—æ³•</h2>
<p>G1 æ˜¯ä¸€ç§ä½å»¶æ—¶çš„åƒåœ¾å›æ”¶å™¨ï¼Œå¯ä»¥éå¸¸ç²¾ç¡®åœ°å¯¹åœé¡¿è¿›è¡Œæ§åˆ¶ã€‚ä» Java 7 å¼€å§‹å¯ç”¨ G1 åƒåœ¾å›æ”¶å™¨ï¼Œåœ¨ Java 9 ä¸­ G1 æˆä¸ºé»˜è®¤åƒåœ¾å›æ”¶ç­–ç•¥ã€‚ä¸è¿‡ï¼Œæˆªæ­¢åˆ° Java 9ï¼ŒG1 çš„ Full GC é‡‡ç”¨çš„æ˜¯å•çº¿ç¨‹ç®—æ³•ï¼Œä¼šåœ¨å‘ç”Ÿ Full GC æ—¶ä¼šä¸¥é‡å½±å“æ€§èƒ½ã€‚</p>
<p>Java 10 å¯¹ G1 è¿›è¡Œäº†æ”¹è¿›ï¼Œå¼•å…¥äº†å¹¶è¡Œçš„ Full GC ç®—æ³•ï¼Œä½¿ç”¨å¤šä¸ªçº¿ç¨‹è¿›è¡Œå¹¶è¡Œå›æ”¶ï¼Œä¸ºç”¨æˆ·æä¾›æ›´å¥½çš„ä½“éªŒã€‚</p>
<hr>
<h1 id="4-Java-11"><a class="header-anchor" href="#4-Java-11">Â¶ </a>4. Java 11</h1>
<div class="admonition info"><p class="admonition-title">More
</p><p><a target="_blank" rel="noopener" href="https://www.happycoders.eu/java/java-11-features/">Java 11 Features</a></p>
</div>
<h2 id="3-1-Lambda-è¡¨è¾¾å¼å‚æ•°ç±»å‹æ¨æ–­"><a class="header-anchor" href="#3-1-Lambda-è¡¨è¾¾å¼å‚æ•°ç±»å‹æ¨æ–­">Â¶ </a>3.1 Lambda è¡¨è¾¾å¼å‚æ•°ç±»å‹æ¨æ–­</h2>
<p>ä½œä¸º<a href="#3-1-%E5%B1%80%E9%83%A8%E5%8F%98%E9%87%8F%E7%B1%BB%E5%9E%8B%E6%8E%A8%E6%96%AD">å±€éƒ¨å˜é‡ç±»å‹æ¨æ–­</a>çš„æ‰©å±•ï¼ŒJava 11 å…è®¸åœ¨ Lambda è¡¨è¾¾å¼çš„å‚æ•°ç”Ÿå‘½ä¸­ä½¿ç”¨ <code>var</code> å…³é”®å­—è¿›è¡Œç±»å‹æ¨æ–­ï¼Œç¤ºä¾‹å¦‚ä¸‹ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">var</span> <span class="variable">filtered</span> <span class="operator">=</span> Stream.of(<span class="string">&quot;Alpha&quot;</span>, <span class="string">&quot;Beta&quot;</span>, <span class="string">&quot;Gamma&quot;</span>, <span class="string">&quot;Delta&quot;</span>)</span><br><span class="line">        .filter((<span class="keyword">var</span> x) -&gt; x.contains(<span class="string">&quot;t&quot;</span>))</span><br><span class="line">        .collect(Collectors.toList());</span><br><span class="line">System.out.println(filtered);</span><br><span class="line"><span class="comment">// Type of `filtered`: List&lt;String&gt;</span></span><br><span class="line"><span class="comment">// Type of `x`: String</span></span><br><span class="line"><span class="comment">// Output: [Beta, Delta]</span></span><br></pre></td></tr></table></figure>
<h2 id="3-2-String"><a class="header-anchor" href="#3-2-String">Â¶ </a>3.2 String*</h2>
<p>Java 11 ä¸º <code>String</code> æ·»åŠ äº†ä¸€äº›å·¥å…·æ–¹æ³•ï¼Œå¦‚ä¸‹ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ä¸ºç©º</span></span><br><span class="line"><span class="string">&quot;    \n\r\t&quot;</span>.isBlank();         <span class="comment">// true</span></span><br><span class="line"><span class="comment">// å»é™¤å­—ç¬¦ä¸²é¦–å°¾ç©ºæ ¼</span></span><br><span class="line"><span class="string">&quot;     Java  &quot;</span>.strip();          <span class="comment">// &quot;Java&quot;</span></span><br><span class="line"><span class="comment">// å»é™¤å­—ç¬¦ä¸²é¦–éƒ¨ç©ºæ ¼</span></span><br><span class="line"><span class="string">&quot;     Java  &quot;</span>.stripLeading();   <span class="comment">// &quot;Java &quot;</span></span><br><span class="line"><span class="comment">// å»é™¤å­—ç¬¦ä¸²å°¾éƒ¨ç©ºæ ¼</span></span><br><span class="line"><span class="string">&quot;     Java  &quot;</span>.stripTrailing();  <span class="comment">// &quot;     Java&quot;</span></span><br><span class="line"><span class="comment">// é‡å¤å­—ç¬¦ä¸² n æ¬¡</span></span><br><span class="line"><span class="string">&quot;Java &quot;</span>.repeat(<span class="number">3</span>);              <span class="comment">// &quot;Java Java Java &quot;</span></span><br><span class="line"><span class="comment">// è¿”å›ç”± EOL åˆ†éš”çš„å­—ç¬¦ä¸²é›†åˆ</span></span><br><span class="line"><span class="string">&quot;A\nB\nC&quot;</span>.lines().count();      <span class="comment">// 3</span></span><br><span class="line"><span class="string">&quot;A\nB\nC&quot;</span>.lines().collect(Collectors.toList());  <span class="comment">// [A, B, C]</span></span><br></pre></td></tr></table></figure>
<h2 id="3-3-Optional-v2"><a class="header-anchor" href="#3-3-Optional-v2">Â¶ </a>3.3 Optional*</h2>
<p>Java 11 ä¸­ä¸º <code>Optional</code> æ–°å¢äº† <code>isEmpty()</code> æ–¹æ³•æ¥åˆ¤æ–­æŒ‡å®šçš„ <code>Optional</code> å¯¹è±¡æ˜¯å¦ä¸ºç©ºï¼Œä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">var</span> <span class="variable">op</span> <span class="operator">=</span> Optional.empty();</span><br><span class="line">System.out.println(op.isEmpty());</span><br><span class="line"><span class="comment">// Output: true</span></span><br></pre></td></tr></table></figure>
<h2 id="3-4-Files"><a class="header-anchor" href="#3-4-Files">Â¶ </a>3.4 Files*</h2>
<p>Java 11 å¼•å…¥äº†ä¸€äº›æ–°çš„æ–‡ä»¶æ–¹æ³•ï¼Œä»¥æä¾›æ›´ä¾¿æ·å’Œå¼ºå¤§çš„æ–‡ä»¶æ“ä½œåŠŸèƒ½ï¼Œä¸»è¦æ˜¯ <code>writeString</code> å’Œ <code>readString</code>ï¼Œç”¨äºå†™å…¥å’Œè¯»å–æ–‡ä»¶ï¼Œå…¶åŸºæœ¬ç”¨æ³•å¦‚ä¸‹ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.nio.file.Files;</span><br><span class="line"><span class="keyword">import</span> java.nio.file.Paths;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FileDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">filePath</span> <span class="operator">=</span> <span class="string">&quot;example.txt&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å†™å…¥æ–‡ä»¶</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">content</span> <span class="operator">=</span> <span class="string">&quot;Hello, world!&quot;</span>;</span><br><span class="line">        Files.writeString(Paths.get(filePath), content);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è¯»å–æ–‡ä»¶</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">fileContent</span> <span class="operator">=</span> Files.readString(Paths.get(filePath));</span><br><span class="line">        System.out.println(<span class="string">&quot;æ–‡ä»¶å†…å®¹ï¼š\n&quot;</span> + fileContent);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ›´å¤šå†…å®¹å¯å‚è€ƒï¼š</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.geeksforgeeks.org/files-class-writestring-method-in-java-with-examples/">Files Class writeString() Method in Java with Examples</a></li>
<li><a target="_blank" rel="noopener" href="https://www.geeksforgeeks.org/files-class-readstring-method-in-java-with-examples/">Files Class readString() Method in Java with Examples</a></li>
</ul>
<h2 id="3-5-æ ‡å‡†-HTTP-Client"><a class="header-anchor" href="#3-5-æ ‡å‡†-HTTP-Client">Â¶ </a>3.5 æ ‡å‡† HTTP Client</h2>
<p>Java 11 å¼•å…¥äº†æ ‡å‡†çš„ HTTP å®¢æˆ·ç«¯ APIï¼Œç”¨äºå‘é€ HTTP è¯·æ±‚å’Œå¤„ç†å“åº”ï¼ŒAPI æä¾›äº†ä¸€ç§åŸç”Ÿçš„æ–¹å¼æ¥è¿›è¡Œ HTTP é€šä¿¡ï¼Œä¸å†éœ€è¦ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“ï¼ŒåŸºæœ¬çš„ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ã€‚</p>
<div class='collapse'>
      <div class='collapse-ctrl collapse-cardtitle' onclick='collapseToggle(this)'><div class='collapse-hint-ico'><img style="pointer-events: none;" width="12" height="12" src="/expand.png"/></div><span class='collapse-hint-show'>Show</span><span class='collapse-hint-hide'>Hide</span></div>
      <div class='collapse-content'><div class='content-flex collapse-cardborder'><div>
          <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.net.URI;</span><br><span class="line"><span class="keyword">import</span> java.net.http.HttpClient;</span><br><span class="line"><span class="keyword">import</span> java.net.http.HttpRequest;</span><br><span class="line"><span class="keyword">import</span> java.net.http.HttpResponse;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.CompletableFuture;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HttpDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">// åˆ›å»ºHTTPå®¢æˆ·ç«¯</span></span><br><span class="line">        <span class="type">HttpClient</span> <span class="variable">httpClient</span> <span class="operator">=</span> HttpClient.newHttpClient();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// åˆ›å»ºHTTPè¯·æ±‚</span></span><br><span class="line">        <span class="type">HttpRequest</span> <span class="variable">httpRequest</span> <span class="operator">=</span> HttpRequest.newBuilder()</span><br><span class="line">                .uri(URI.create(<span class="string">&quot;https://api.example.com/data&quot;</span>))</span><br><span class="line">                .build();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å‘é€HTTPè¯·æ±‚å¹¶å¼‚æ­¥è·å–å“åº”</span></span><br><span class="line">        CompletableFuture&lt;HttpResponse&lt;String&gt;&gt; future = httpClient.sendAsync(httpRequest, HttpResponse.BodyHandlers.ofString());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¤„ç†å“åº”</span></span><br><span class="line">        future.thenAccept(response -&gt; &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">statusCode</span> <span class="operator">=</span> response.statusCode();</span><br><span class="line">            <span class="type">String</span> <span class="variable">responseBody</span> <span class="operator">=</span> response.body();</span><br><span class="line">            System.out.println(<span class="string">&quot;Status code: &quot;</span> + statusCode);</span><br><span class="line">            System.out.println(<span class="string">&quot;Response body: &quot;</span> + responseBody);</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ç­‰å¾…å¼‚æ­¥è¯·æ±‚å®Œæˆ</span></span><br><span class="line">        future.join();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</div></div>
      </div>
  </div>
<div class="admonition note"><p class="admonition-title">Note</p><p>å°½ç®¡ Java 11 æä¾›äº†æ ‡å‡†åŒ–çš„ HTTP Clientï¼Œè¿˜æ˜¯æ¨èä½¿ç”¨ç¬¬ä¸‰æ–¹åº“ <a target="_blank" rel="noopener" href="https://square.github.io/okhttp/">OkHttp</a>ã€‚</p>
</div>
<hr>
<h1 id="5-Java-12"><a class="header-anchor" href="#5-Java-12">Â¶ </a>5. Java 12</h1>
<div class="admonition info"><p class="admonition-title">More
</p><p><a target="_blank" rel="noopener" href="https://www.happycoders.eu/java/java-12-features/">Java 12 Features</a></p>
</div>
<h2 id="5-1-String"><a class="header-anchor" href="#5-1-String">Â¶ </a>5.1 String*</h2>
<p>Java 12 å†æ¬¡ä¸º <code>String</code> æ·»åŠ äº†ä¸€äº›å·¥å…·æ–¹æ³•ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">////////// ä¸ºå­—ç¬¦ä¸²å¢åŠ ç¼©è¿› //////////</span></span><br><span class="line"><span class="type">String</span> <span class="variable">text</span> <span class="operator">=</span> <span class="string">&quot;Java&quot;</span>;</span><br><span class="line">text = text.indent(<span class="number">4</span>); <span class="comment">// å¢åŠ  4 ä¸ªç©ºæ ¼ç¼©è¿›</span></span><br><span class="line">System.out.println(text);</span><br><span class="line">text = text.indent(<span class="number">2</span>); <span class="comment">// å¢åŠ  2 ä¸ªç©ºæ ¼ç¼©è¿›</span></span><br><span class="line">System.out.println(text);</span><br><span class="line">text = text.indent(-<span class="number">4</span>); <span class="comment">// å‡å°‘ 4 ä¸ªç©ºæ ¼ç¼©è¿›</span></span><br><span class="line">System.out.println(text);</span><br><span class="line"><span class="comment">// Output: Â· ä»£è¡¨ç©ºæ ¼ï¼ˆè¿™é‡Œæ˜¯æœ‰ \n çš„ï¼‰</span></span><br><span class="line"><span class="comment">// Â·Â·Â·Â·Java</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Â·Â·Â·Â·Â·Â·Java</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Â·Â·Java</span></span><br><span class="line"></span><br><span class="line"><span class="comment">////////// å˜æ¢æŒ‡å®šå­—ç¬¦ä¸² //////////</span></span><br><span class="line"><span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> <span class="string">&quot;foo&quot;</span>.transform(input -&gt; input + <span class="string">&quot; bar&quot;</span>);</span><br><span class="line">System.out.println(result);</span><br></pre></td></tr></table></figure>
<div class="admonition note"><p class="admonition-title">Note</p><p><code>indent</code> æ–¹æ³•ä¼šé¦–å…ˆå°†å­—ç¬¦ä¸²æŒ‰ EOL åˆ†éš”ä¸ºè‹¥å¹²è¡Œï¼Œç„¶åä¸ºæ¯ä¸€è¡Œå¢åŠ æˆ–å‡å°‘ç¼©è¿›ï¼Œå¹¶ä¸”ä¼šåœ¨ä¸ä»¥ <code>\n</code> ç»“å°¾çš„è¡Œæœ«æ·»åŠ  <code>\n</code>ï¼Œæœ€åå†å°†è¿™äº›è¡Œæ‹¼æ¥ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ã€‚</p>
</div>
<h2 id="5-2-Files"><a class="header-anchor" href="#5-2-Files">Â¶ </a>5.2 Files*</h2>
<p>Java 12 ä¸º <code>Files</code> å¼•å…¥äº†ç”¨äºæ¯”è¾ƒä¸¤ä¸ªæ–‡ä»¶å†…å®¹çš„ <code>mismatch()</code> æ–¹æ³•ï¼Œè¿”å›ç¬¬ä¸€ä¸ªä¸åŒ¹é…å­—ç¬¦çš„ä½ç½®ï¼Œç›¸åŒåˆ™è¿”å› -1ã€‚ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ã€‚</p>
<div class='collapse'>
      <div class='collapse-ctrl collapse-cardtitle' onclick='collapseToggle(this)'><div class='collapse-hint-ico'><img style="pointer-events: none;" width="12" height="12" src="/expand.png"/></div><span class='collapse-hint-show'>Show</span><span class='collapse-hint-hide'>Hide</span></div>
      <div class='collapse-content'><div class='content-flex collapse-cardborder'><div>
          <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.nio.file.Files;</span><br><span class="line"><span class="keyword">import</span> java.nio.file.Path;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FilesMismatchDemo</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> Path <span class="title function_">createTempPath</span><span class="params">(String fileName)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">Path</span> <span class="variable">tempPath</span> <span class="operator">=</span> Files.createTempFile(fileName, <span class="string">&quot;.txt&quot;</span>);</span><br><span class="line">        tempPath.toFile().deleteOnExit();</span><br><span class="line">        <span class="keyword">return</span> tempPath;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">Path</span> <span class="variable">filePath1</span> <span class="operator">=</span> createTempPath(<span class="string">&quot;test1&quot;</span>);</span><br><span class="line">        <span class="type">Path</span> <span class="variable">filePath2</span> <span class="operator">=</span> createTempPath(<span class="string">&quot;test2&quot;</span>);</span><br><span class="line">        <span class="type">Path</span> <span class="variable">filePath3</span> <span class="operator">=</span> createTempPath(<span class="string">&quot;test3&quot;</span>);</span><br><span class="line"></span><br><span class="line">        Files.writeString(filePath1, <span class="string">&quot;Life is a progress, and not a station.&quot;</span>);</span><br><span class="line">        Files.writeString(filePath2, <span class="string">&quot;Life is a progress, and not a station.&quot;</span>);</span><br><span class="line">        Files.writeString(filePath3, <span class="string">&quot;Life is a progress, it&#x27;s not a station.&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">long</span> <span class="variable">mismatch</span> <span class="operator">=</span> Files.mismatch(filePath1, filePath2);</span><br><span class="line">        System.out.println(<span class="string">&quot;File1 x File2 = &quot;</span> + mismatch); <span class="comment">// match</span></span><br><span class="line"></span><br><span class="line">        mismatch = Files.mismatch(filePath1, filePath3);</span><br><span class="line">        System.out.println(<span class="string">&quot;File1 x File3 = &quot;</span> + mismatch); <span class="comment">// mismatch</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Output:</span></span><br><span class="line"><span class="comment">// File1 x File2 = -1</span></span><br><span class="line"><span class="comment">// File1 x File3 = 20</span></span><br></pre></td></tr></table></figure>
</div></div>
      </div>
  </div>
<hr>
<h1 id="6-Java-13"><a class="header-anchor" href="#6-Java-13">Â¶ </a>6. Java 13</h1>
<div class="admonition info"><p class="admonition-title">More
</p><p><a target="_blank" rel="noopener" href="https://www.happycoders.eu/java/java-13-features/">Java 13 Features</a></p>
</div>
<h2 id="6-1-Socket-API"><a class="header-anchor" href="#6-1-Socket-API">Â¶ </a>6.1 Socket API</h2>
<p>Java 13 å°† Socket API çš„åº•å±‚è¿›è¡Œäº†é‡å†™ï¼Œ<code>NioSocketImpl</code> æ˜¯å¯¹åŸå…ˆ <code>PlainSocketImpl</code> çš„ç›´æ¥æ›¿ä»£ï¼Œå®ƒä½¿ç”¨ <code>java.util.concurrent</code> åŒ…ä¸‹çš„é”è€Œä¸æ˜¯åŒæ­¥æ–¹æ³•ã€‚åœ¨ Java 13 ä¸­é»˜è®¤ä½¿ç”¨æ–°çš„ Socket å®ç°ã€‚å¦‚æœè¦ä½¿ç”¨æ—§å®ç°ï¼Œè¯·ä½¿ç”¨ <code>-Djdk.net.usePlainSocketImpl=true</code>ã€‚</p>
<hr>
<h1 id="7-Java-14"><a class="header-anchor" href="#7-Java-14">Â¶ </a>7. Java 14</h1>
<div class="admonition info"><p class="admonition-title">More
</p><p><a target="_blank" rel="noopener" href="https://www.happycoders.eu/java/java-14-features/">Java 14 Features</a></p>
</div>
<h2 id="7-1-Switch-è¡¨è¾¾å¼"><a class="header-anchor" href="#7-1-Switch-è¡¨è¾¾å¼">Â¶ </a>7.1 Switch è¡¨è¾¾å¼</h2>
<div class="admonition info"><p class="admonition-title"> Docs
</p><p><a target="_blank" rel="noopener" href="https://docs.oracle.com/en/java/javase/14/language/switch-expressions.html">Switch Expressions</a></p>
</div>
<p>ä¸åŒäºä¼ ç»Ÿçš„ <code>switch</code> è¯­å¥ï¼Œ<code>switch</code> è¡¨è¾¾å¼ä¸­ä¸éœ€è¦åœ¨æ¯ä¸€ä¸ªåˆ†æ”¯ç»“å°¾ä½¿ç”¨ <code>break</code>ï¼Œå¹¶ä¸”ä½¿ç¨‹åºå¯è¯»æ€§æ›´é«˜ã€‚</p>
<div class="admonition note"><p class="admonition-title">Note</p><p>ä¼ ç»Ÿçš„ <code>switch</code> è¯­å¥å­˜åœ¨â€œç›´é€šå¼â€ï¼ˆfallthroughï¼‰è¡Œä¸ºï¼Œå³å¦‚æœä¸€ä¸ªåˆ†æ”¯æœ«å°¾æ²¡æœ‰ <code>break</code> è¯­å¥ï¼Œå°±ä¼šæ¥ç€æ‰§è¡Œä¸‹ä¸€ä¸ªåˆ†æ”¯ã€‚</p>
</div>
<p><code>switch</code> è¡¨è¾¾å¼çš„æ¯ä¸€ä¸ªåˆ†æ”¯ç”¨äºç”Ÿæˆä¸€ä¸ªå€¼ï¼Œå„ä¸ªå€¼è·Ÿåœ¨ä¸€ä¸ªç®­å¤´ <code>-&gt;</code> åé¢ï¼Œå¦‚ä¸‹ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">case</span> <span class="string">&quot;Summer&quot;</span>, <span class="string">&quot;Winter&quot;</span> -&gt; <span class="number">6</span>;</span><br></pre></td></tr></table></figure>
<p>åœ¨åˆ†æ”¯åŒ…å«å¤šæ¡è¯­å¥æ—¶ï¼Œé€šè¿‡ <code>yield</code> å…³é”®å­—è¿”å›è¯¥å€¼ï¼Œå¹¶ç»“æŸè¯¥åˆ†æ”¯ï¼Œå¦‚ä¸‹ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">case</span> <span class="string">&quot;Spring&quot;</span> -&gt; &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;It will be a silent Spring.&quot;</span>);</span><br><span class="line">    <span class="keyword">yield</span> <span class="number">6</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸ºäº†ä¸æ—§çš„ <code>switch</code> è¯­å¥å¯¹ç§°ï¼ŒJava 14 è¿˜å¼•å…¥äº†æœ‰â€œç›´é€šå¼â€è¡Œä¸ºçš„ <code>switch</code> è¡¨è¾¾å¼ï¼Œæ‰€ä»¥æ€»å…±æœ‰ 4 ä¸­ä¸åŒå½¢å¼çš„ <code>switch</code>ï¼Œå¦‚ä¸‹ã€‚ï¼ˆä»¥ä¸‹ 4 ä¸ªä¾‹å­çš„å†™æ³•ç­‰ä»·ã€‚ï¼‰</p>
<p><strong><code>switch</code> è¡¨è¾¾å¼ï¼ˆæ— ç›´é€šï¼‰</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">numLetters = <span class="keyword">switch</span> (seasonName) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;Spring&quot;</span> -&gt; &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;It will be a silent Spring.&quot;</span>);</span><br><span class="line">        <span class="keyword">yield</span> <span class="number">6</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;Summer&quot;</span>, <span class="string">&quot;Winter&quot;</span> -&gt; <span class="number">6</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;Fall&quot;</span> -&gt; <span class="number">4</span>;</span><br><span class="line">    <span class="keyword">default</span> -&gt; <span class="number">1</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p><strong><code>switch</code> è¯­å¥ï¼ˆæ— ç›´é€šï¼‰</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">switch</span> (seasonName) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;Spring&quot;</span> -&gt; &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;It will be a silent Spring.&quot;</span>);</span><br><span class="line">        numLetters = <span class="number">6</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;Summer&quot;</span>, <span class="string">&quot;Winter&quot;</span> -&gt; numLetters = <span class="number">6</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;Fall&quot;</span> -&gt; numLetters = <span class="number">4</span>;</span><br><span class="line">    <span class="keyword">default</span> -&gt; numLetters = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong><code>switch</code> è¡¨è¾¾å¼ï¼ˆæœ‰ç›´é€šï¼‰</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">numLetters = <span class="keyword">switch</span> (seasonName) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;Spring&quot;</span>:</span><br><span class="line">        System.out.println(<span class="string">&quot;It will be a silent Spring.&quot;</span>);</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;Summer&quot;</span>, <span class="string">&quot;Winter&quot;</span>:</span><br><span class="line">        <span class="keyword">yield</span> <span class="number">6</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;Fall&quot;</span>:</span><br><span class="line">        <span class="keyword">yield</span> <span class="number">4</span>;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        <span class="keyword">yield</span> <span class="number">1</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p><strong><code>switch</code> è¯­å¥ï¼ˆæœ‰ç›´é€šï¼‰</strong></p>
<p>è¿™ç§å½¢å¼å³æ—§çš„ <code>switch</code> è¯­å¥ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">switch</span> (seasonName) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;Spring&quot;</span>:</span><br><span class="line">        System.out.println(<span class="string">&quot;It will be a silent Spring.&quot;</span>);</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;Summer&quot;</span>, <span class="string">&quot;Winter&quot;</span>:</span><br><span class="line">        numLetters = <span class="number">6</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;Fall&quot;</span>:</span><br><span class="line">        numLetters = <span class="number">4</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        numLetters = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="7-2-ç©ºæŒ‡é’ˆæç¤º"><a class="header-anchor" href="#7-2-ç©ºæŒ‡é’ˆæç¤º">Â¶ </a>7.2 ç©ºæŒ‡é’ˆæç¤º</h2>
<p>å‡å¦‚æˆ‘ä»¬æœ‰è¿™æ ·ä¸€ä¸ªé“¾å¼è°ƒç”¨ï¼Œå…¶ä¸­ä¸€ä¸ªå‡½æ•°è¿”å›äº† <code>null</code>ï¼Œé‚£ä¹ˆå°†ä¼šæŠ›å‡º <code>NullPointerException</code>ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">long</span> <span class="variable">value</span> <span class="operator">=</span> context.getService().getContainer().getMap().getValue();</span><br></pre></td></tr></table></figure>
<p>åœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘ä»¬å¾—åˆ°çš„ä¿¡æ¯éå¸¸æœ‰é™ï¼Œå¯¹å®šä½å¼‚å¸¸ä½ç½®å¸®åŠ©ä¸å¤§ï¼Œå¦‚ä¸‹ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Exception in thread &quot;main&quot; java.lang.NullPointerException</span><br><span class="line">    at eu.happycoders.BusinessLogic.calculate(BusinessLogic.java:80)</span><br></pre></td></tr></table></figure>
<p>ä½†åœ¨ Java 14 ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°æ›´ç²¾ç¡®çš„æç¤ºï¼Œå¦‚ä¸‹ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Exception in thread &quot;main&quot; java.lang.NullPointerException: </span><br><span class="line">Cannot invoke &quot;Map.getValue()&quot; because the return value of &quot;Container.getMap()&quot; is null</span><br><span class="line">    at eu.happycoders.BusinessLogic.calculate(BusinessLogic.java:80)</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="8-Java-15"><a class="header-anchor" href="#8-Java-15">Â¶ </a>8. Java 15</h1>
<div class="admonition info"><p class="admonition-title">Info</p><p><a target="_blank" rel="noopener" href="https://www.happycoders.eu/java/java-15-features/">Java 15 Features</a></p>
</div>
<h2 id="8-1-æ–‡æœ¬å—ï¼ˆText-Blocksï¼‰"><a class="header-anchor" href="#8-1-æ–‡æœ¬å—ï¼ˆText-Blocksï¼‰">Â¶ </a>8.1 æ–‡æœ¬å—ï¼ˆText Blocksï¼‰</h2>
<p>å¼•å…¥æ–‡æœ¬å—ä¹‹å‰ï¼Œå¯¹äºå¤šè¡Œå­—ç¬¦ä¸²ï¼Œä¸ºäº†è¡¨è¾¾æ›´æ¸…æ™°ï¼Œæˆ‘ä»¬åªèƒ½é€šè¿‡æ‹¼æ¥çš„æ–¹å¼è·å¾—ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TextBlocks</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        System.out.println(</span><br><span class="line">            <span class="string">&quot;&lt;!DOCTYPE html&gt;\n&quot;</span> +</span><br><span class="line">            <span class="string">&quot;&lt;html&gt;\n&quot;</span> +</span><br><span class="line">            <span class="string">&quot;     &lt;head&gt;\n&quot;</span> +</span><br><span class="line">            <span class="string">&quot;        &lt;title&gt;Example&lt;/title&gt;\n&quot;</span> +</span><br><span class="line">            <span class="string">&quot;    &lt;/head&gt;\n&quot;</span> +</span><br><span class="line">            <span class="string">&quot;    &lt;body&gt;\n&quot;</span> +</span><br><span class="line">            <span class="string">&quot;        &lt;p&gt;This is an example of a simple HTML &quot;</span> +</span><br><span class="line">            <span class="string">&quot;page with one paragraph.&lt;/p&gt;\n&quot;</span> +</span><br><span class="line">            <span class="string">&quot;    &lt;/body&gt;\n&quot;</span> +</span><br><span class="line">            <span class="string">&quot;&lt;/html&gt;\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨å¼•å…¥æ–‡æœ¬å—åï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¦‚ä¸‹çš„å†™æ³•ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TextBlocks</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">                &lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="string">                &lt;html&gt;</span></span><br><span class="line"><span class="string">                    &lt;head&gt;</span></span><br><span class="line"><span class="string">                        &lt;title&gt;Example&lt;/title&gt;</span></span><br><span class="line"><span class="string">                    &lt;/head&gt;</span></span><br><span class="line"><span class="string">                    &lt;body&gt;</span></span><br><span class="line"><span class="string">                        &lt;p&gt;This is an example of a simple HTML </span></span><br><span class="line"><span class="string">                        page with one paragraph.&lt;/p&gt;</span></span><br><span class="line"><span class="string">                    &lt;/body&gt;</span></span><br><span class="line"><span class="string">                &lt;/html&gt;      </span></span><br><span class="line"><span class="string">                &quot;&quot;&quot;</span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<div class="admonition note"><p class="admonition-title">Note</p><p>æ–‡æœ¬å—ä¼šè‡ªåŠ¨å»é™¤æ‰€æœ‰è¡Œçš„å…¬å…±å‰å¯¼ç©ºæ ¼ï¼ˆä¹ŸåŒ…æ‹¬ç»“å°¾ <code>&quot;&quot;&quot;</code> çš„å‰å¯¼ç©ºæ ¼ï¼ï¼‰ï¼Œå› æ­¤ä»¥ä¸Šä¸¤ä¸ªä¾‹å­å¾—åˆ°çš„å­—ç¬¦ä¸²æ˜¯ç›¸åŒçš„ã€‚</p>
</div>
<div class="admonition error"><p class="admonition-title">Danger
</p><p>å¿…é¡»åœ¨æ–‡æœ¬å—å¼€å¤´çš„ <code>&quot;&quot;&quot;</code> ä¹‹åæ¢è¡Œï¼Œå¦åˆ™æ— æ³•é€šè¿‡ç¼–è¯‘ï¼Œå°½ç®¡è¯¥æ¢è¡Œä¸ä¼šå‡ºç°åœ¨æœ€ç»ˆçš„å­—ç¬¦ä¸²ä¸­ã€‚ğŸ˜°</p>
</div>
<h2 id="8-2-String-å’Œ-CharSequence"><a class="header-anchor" href="#8-2-String-å’Œ-CharSequence">Â¶ </a>8.2 String å’Œ CharSequence*</h2>
<p>Java 15 ä¸º <code>String</code> å’Œ <code>CharSequence</code> å¢åŠ äº†ä¸€äº›æ–¹æ³•ã€‚</p>
<ul>
<li><code>String.formatted()</code></li>
<li><code>String.stripIndent()</code></li>
<li><code>String.translateEscapes()</code></li>
<li><code>CharSequence.isEmpty()</code></li>
</ul>
<div class="admonition info"><p class="admonition-title">Info</p><p>è¿™äº›å‡½æ•°çš„è¯¦ç»†è¯´æ˜å¯å‚è€ƒï¼š<a target="_blank" rel="noopener" href="https://www.happycoders.eu/java/java-15-features/#new-string-and-charsequence-methods">New String and CharSequence Methods</a></p>
</div>
<h2 id="8-3-æ–°çš„-GC"><a class="header-anchor" href="#8-3-æ–°çš„-GC">Â¶ </a>8.3 æ–°çš„ GC</h2>
<p>ä¸ºäº†è§£å†³åŸæœ¬ G1 åƒåœ¾å›æ”¶å™¨ Full GC å¸¦æ¥çš„æ€§èƒ½å½±å“ï¼Œåœ¨ Java 10 ä¸­è™½ç„¶å¼•å…¥äº†å¹¶è¡Œç®—æ³•ï¼Œä½†å®é™…ä¸Šä»ä¼šåœæ­¢åº”ç”¨ä»¥è¿›è¡Œåƒåœ¾å›æ”¶ã€‚åœ¨ Java 15 ä¸­å¼•å…¥äº†ä¸¤ä¸ªæ–°çš„ä½å»¶è¿Ÿ GC ä»¥è§£å†³è¯¥é—®é¢˜ï¼š<a target="_blank" rel="noopener" href="https://wiki.openjdk.org/display/zgc/Main">ZGC</a> å’Œ <a target="_blank" rel="noopener" href="https://wiki.openjdk.org/display/shenandoah/Main">Shenandoah</a>ã€‚</p>
<p>ä¸¤ä¸ªæ–°çš„åƒåœ¾å›æ”¶å™¨éœ€è¦é€šè¿‡ JVM å‚æ•°å¯åŠ¨ï¼Œå¦‚ä¸‹ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-XX:+UseZGC           <span class="comment"># ä½¿ç”¨ ZGC</span></span><br><span class="line">-XX:+UseShenandoahGC  <span class="comment"># ä½¿ç”¨ Shenandoah</span></span><br></pre></td></tr></table></figure>
<hr>
<h1 id="9-Java-16"><a class="header-anchor" href="#9-Java-16">Â¶ </a>9. Java 16</h1>
<div class="admonition info"><p class="admonition-title">Info</p><p><a target="_blank" rel="noopener" href="https://www.happycoders.eu/java/java-16-features/">Java 16 Features</a></p>
</div>
<h2 id="9-1-instanceof-æ¨¡å¼åŒ¹é…"><a class="header-anchor" href="#9-1-instanceof-æ¨¡å¼åŒ¹é…">Â¶ </a>9.1 instanceof æ¨¡å¼åŒ¹é…</h2>
<p><code>instanceof</code> æ¨¡å¼åŒ¹é…è¯­æ³•åœ¨ Java 16 ä¸­æ­£å¼å‘å¸ƒï¼Œå¯ä»¥ç®€åŒ–æˆ‘ä»¬å¯¹ <code>instanceof</code> çš„ä½¿ç”¨ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¹‹å‰ï¼Œæˆ‘ä»¬å¿…é¡»åœ¨ä½¿ç”¨ <code>instanceof</code> çš„åˆ†æ”¯è¯­å¥ä¸­å†æ¬¡è°ƒç”¨ç±»å‹è½¬æ¢ï¼Œå¹¶å£°æ˜å˜é‡ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Object</span> <span class="variable">obj</span> <span class="operator">=</span> getObject();</span><br><span class="line"><span class="keyword">if</span> (obj <span class="keyword">instanceof</span> String) &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> (String) obj;</span><br><span class="line">    <span class="keyword">if</span> (s.length() &gt; <span class="number">5</span>) &#123;</span><br><span class="line">        System.out.println(s.toUpperCase());</span><br><span class="line">    &#125;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (obj <span class="keyword">instanceof</span> Integer) &#123;</span><br><span class="line">    <span class="type">Integer</span> <span class="variable">i</span> <span class="operator">=</span> (Integer) obj;</span><br><span class="line">    System.out.println(i * i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä» Java 16 å¼€å§‹ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä½¿ç”¨ <code>instanceof</code> çš„åŒæ—¶å®Œæˆå˜é‡å£°æ˜ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (obj <span class="keyword">instanceof</span> String s) &#123;          <span class="comment">// éšå¼è½¬æ¢ä¸º String s</span></span><br><span class="line">    <span class="keyword">if</span> (s.length() &gt; <span class="number">5</span>) &#123;</span><br><span class="line">        System.out.println(s.toUpperCase());</span><br><span class="line">    &#125;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (obj <span class="keyword">instanceof</span> Integer i) &#123;  <span class="comment">// éšå¼è½¬æ¢ä¸º Integer i</span></span><br><span class="line">    System.out.println(i * i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åŒæ—¶ï¼Œåœ¨å˜é‡å£°æ˜ä¹‹åï¼Œè¿˜å¯ä»¥ç»§ç»­ä¸²è”é€»è¾‘è¡¨è¾¾å¼ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (obj <span class="keyword">instanceof</span> String s &amp;&amp; s.length() &gt; <span class="number">5</span>) &#123;</span><br><span class="line">    System.out.println(s.toUpperCase());</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (obj <span class="keyword">instanceof</span> Integer i) &#123;</span><br><span class="line">    System.out.println(i * i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ­¤å¤–ï¼Œåœ¨ä»¥ä¸Šçš„ä¾‹å­ä¸­ï¼Œä¹Ÿå¯ä»¥çœ‹å‡ºï¼Œæ¨¡å¼å˜é‡ï¼ˆå³ä¾‹å­ä¸­çš„ <code>s</code> å’Œ <code>i</code>ï¼‰ä¸å†æ˜¯éšå¼ <code>final</code> å˜é‡ï¼Œè€Œå¯ä»¥è¢«æ”¹å˜ã€‚æ¯”å¦‚å…¶ä¸­çš„ <code>String.toUpperCase()</code> æ–¹æ³•ï¼Œåœ¨ä¹‹å‰ç‰ˆæœ¬ä¸­æ— æ³•é€šè¿‡ç¼–è¯‘ã€‚</p>
<div class="admonition note"><p class="admonition-title">Note</p><p>æ¨¡å¼å˜é‡ä¸å±€éƒ¨å˜é‡ç±»ä¼¼ï¼Œä½œç”¨èŒƒå›´ä¸ºæ‰€å±çš„åˆ†æ”¯è¯­å¥ï¼Œå¹¶ä¸”ä¼šéšè—åŒåçš„æˆå‘˜å˜é‡ï¼Œä½†æ˜¯ä¸èƒ½ä¸å·²å£°æ˜çš„å±€éƒ¨å˜é‡åŒåã€‚</p>
</div>
<h2 id="9-2-Records"><a class="header-anchor" href="#9-2-Records">Â¶ </a>9.2 Records</h2>
<div class="admonition info"><p class="admonition-title">Docs
</p><p><a target="_blank" rel="noopener" href="https://docs.oracle.com/en/java/javase/16/language/records.html">Record Classes</a></p>
</div>
<p><code>records</code> åœ¨å‡ è½®çš„ Preview åï¼Œåœ¨ Java 16 ä¸­æ­£å¼å‘å¸ƒã€‚</p>
<p><code>record</code> ç±»æä¾›ä¸€ç§ç´§å‡‘çš„è¯­æ³•æ¥å®šä¹‰<strong>ä¸å¯å˜</strong>æ•°æ®ç±»ï¼Œå…¶é€‚ç”¨äºåªæœ‰æ„é€ æ–¹æ³•ä¸å…¶åŸºæœ¬è¯­æ³•å¦‚ä¸‹ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">record</span> <span class="title class_">Point</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨</span></span><br><span class="line"><span class="type">Point</span> <span class="variable">p</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Point</span>(<span class="number">5</span>, <span class="number">10</span>);</span><br><span class="line"><span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> p.x();</span><br><span class="line"><span class="type">int</span> <span class="variable">y</span> <span class="operator">=</span> p.y();</span><br></pre></td></tr></table></figure>
<div class="admonition info"><p class="admonition-title">Info</p><p>æ›´å¤šå…³äº <code>record</code> çš„å†…å®¹ï¼Œå¯å‚è€ƒï¼š<a target="_blank" rel="noopener" href="https://www.happycoders.eu/java/records/">Java Records</a>ã€‚</p>
</div>
<h2 id="9-3-Stream"><a class="header-anchor" href="#9-3-Stream">Â¶ </a>9.3 Stream*</h2>
<p>Java 16 å†æ¬¡ä¸º <code>Stream</code> å¼•å…¥äº†æ–°çš„æ–¹æ³•ã€‚</p>
<h3 id="9-3-1-Stream-toList"><a class="header-anchor" href="#9-3-1-Stream-toList">Â¶ </a>9.3.1 <code>Stream.toList()</code></h3>
<p>å†æ­¤ä¹‹å‰ï¼Œè¦å°† <code>Stream</code> è½¬æ¢ä¸ºåˆ—è¡¨ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ <code>Collector.toList()</code> æ–¹æ³•ï¼Œç°åœ¨å¯ä»¥ç›´æ¥ä½¿ç”¨ <code>Stream.toList()</code> æ–¹æ³•è¿›è¡Œè½¬åŒ–ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Stream.of(<span class="string">&quot;foo&quot;</span>, <span class="string">&quot;bar&quot;</span>, <span class="string">&quot;baz&quot;</span>).collect(Collectors.toList());</span><br><span class="line">Stream.of(<span class="string">&quot;foo&quot;</span>, <span class="string">&quot;bar&quot;</span>, <span class="string">&quot;baz&quot;</span>).toList();</span><br></pre></td></tr></table></figure>
<div class="admonition warning"><p class="admonition-title">Warning</p><p>ä¸¤ç§å†™æ³•ä¸å®Œå…¨ç­‰ä»·ï¼<code>Stream.toList()</code> è¿”å›<strong>ä¸å¯å˜</strong>åˆ—è¡¨ï¼Œè€Œ <code>Collector.toList</code> å¯¹è¿”å›ç»“æœå¹¶æ²¡æœ‰è¿‡å¤šçš„é™åˆ¶ã€‚</p>
</div>
<h3 id="9-3-2-Stream-mapMulti"><a class="header-anchor" href="#9-3-2-Stream-mapMulti">Â¶ </a>9.3.2 <code>Stream.mapMulti()</code></h3>
<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¯¥æ–¹æ³•åˆå¹¶å¤šä¸ª <code>Stream</code>ï¼Œä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Stream&lt;List&lt;Integer&gt;&gt; stream = Stream.of(</span><br><span class="line">    List.of(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>),</span><br><span class="line">    List.of(<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>),</span><br><span class="line">    List.of(<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>));</span><br><span class="line">List&lt;Integer&gt; list = stream.flatMap(List::stream).toList();</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="10-Java-17"><a class="header-anchor" href="#10-Java-17">Â¶ </a>10. Java 17</h1>
<div class="admonition info"><p class="admonition-title">Docs
</p><p><a target="_blank" rel="noopener" href="https://www.happycoders.eu/java/java-17-features/">Java 17 Features</a></p>
</div>
<h2 id="10-1-å¯†å°ç±»ï¼ˆSealed-Classesï¼‰"><a class="header-anchor" href="#10-1-å¯†å°ç±»ï¼ˆSealed-Classesï¼‰">Â¶ </a>10.1 å¯†å°ç±»ï¼ˆSealed Classesï¼‰</h2>
<p>å¦‚æœæˆ‘ä»¬ä¸å¸Œæœ›ä¸€ä¸ªç±»è¢«ç»§æ‰¿ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦åœ¨å£°æ˜è¯¥ç±»æ—¶ä½¿ç”¨ <code>final</code> å…³é”®å­—ã€‚ä½†æ˜¯å¦‚æœæˆ‘ä»¬å¸Œæœ›è¿™ä¸ªç±»åªèƒ½è¢«æŸå‡ ä¸ªç±»ç»§æ‰¿ï¼Œå°±éœ€è¦ç”¨åˆ°æ–°å¼•å…¥çš„å¯†å°ç±»äº†ã€‚</p>
<p>å¯†å°ç±»å…è®¸æŒ‡å®šå½“å‰ç±»å¯ä»¥è¢«é‚£äº›ç±»ç»§æ‰¿ï¼Œå¦‚ä¸‹ï¼Œ<code>Vehicle</code> å¯ä»¥ï¼Œä¸”åªèƒ½è¢« <code>Bicycle</code> å’Œ <code>Car</code> <strong>ç›´æ¥</strong>ç»§æ‰¿ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">sealed</span> <span class="keyword">class</span> <span class="title class_">Vehicle</span> <span class="keyword">permits</span> Bicycle, Car &#123;...&#125;</span><br></pre></td></tr></table></figure>
<p>å¯¹äº <code>Bicycle</code> å’Œ <code>Car</code>ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©ä¸ç»§æ‰¿ã€‚å¦‚æœè¦ç»§æ‰¿ï¼Œå¿…é¡»ä½¿ç”¨ <code>final</code>ï¼Œ<code>sealed</code>ï¼Œæˆ– <code>non-sealed</code> å…³é”®å­—ä¿®é¥°ã€‚å…¶ä¸­ï¼Œ<code>final</code> å’Œ <code>sealed</code> å«ä¹‰ä¸å˜ï¼Œæ˜¯å¯¹è¯¥ç±»ç»§æ‰¿ç»“æ„çš„é™åˆ¶ã€‚<code>non-sealed</code> è¡¨ç¤ºå–æ¶ˆè¯¥ç±»çš„ç»§æ‰¿é™åˆ¶ï¼Œä»è€Œå¯ä»¥å†æ¬¡è¢«ä»»ä½•ç±»ç»§æ‰¿ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">Bicycle</span> <span class="keyword">extends</span> <span class="title class_">Vehicle</span> &#123;...&#125;   <span class="comment">// å…¶ä»–ç±»æ— æ³•ç»§æ‰¿ Bicycle</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">non-sealed</span> <span class="keyword">class</span> <span class="title class_">Car</span> <span class="keyword">extends</span> <span class="title class_">Vehicle</span> &#123;...&#125;  <span class="comment">// å…¶ä»–ä»»ä½•ç±»éƒ½å¯ä»¥ç»§æ‰¿ Car</span></span><br></pre></td></tr></table></figure>
<div class="admonition info"><p class="admonition-title">Info</p><p>å…³äºå¯†å°ç±»çš„æ›´å¤šå†…å®¹ï¼Œå¯å‚è€ƒï¼š<a target="_blank" rel="noopener" href="https://www.happycoders.eu/java/sealed-classes/">Sealed Classes in Java</a></p>
</div>
<h2 id="10-2-åå…­è¿›åˆ¶æ ¼å¼åŒ–"><a class="header-anchor" href="#10-2-åå…­è¿›åˆ¶æ ¼å¼åŒ–">Â¶ </a>10.2 åå…­è¿›åˆ¶æ ¼å¼åŒ–</h2>
<div class="admonition info"><p class="admonition-title">Docs
</p><p><a target="_blank" rel="noopener" href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/HexFormat.html">Class <code>HexFormat</code></a></p>
</div>
<p>Java 17 æä¾›äº†æ–°çš„ <code>HexFormat</code> ç±»å¤„ç†åå…­è¿›åˆ¶æ•´æ•°ä¸å­—ç¬¦ä¼ çš„è½¬æ¢ï¼ŒåŸºæœ¬ä½¿ç”¨å¦‚ä¸‹ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">HexFormat</span> <span class="variable">hexFormat</span> <span class="operator">=</span> HexFormat.of();</span><br><span class="line"></span><br><span class="line">System.out.println(hexFormat.toHexDigits(<span class="string">&#x27;A&#x27;</span>));</span><br><span class="line">System.out.println(hexFormat.toHexDigits((<span class="type">byte</span>) <span class="number">10</span>));</span><br><span class="line">System.out.println(hexFormat.toHexDigits((<span class="type">short</span>) <span class="number">1_000</span>));</span><br><span class="line">System.out.println(hexFormat.toHexDigits(<span class="number">1_000_000</span>));</span><br><span class="line">System.out.println(hexFormat.toHexDigits(<span class="number">100_000_000_000L</span>));</span><br><span class="line">System.out.println(hexFormat.formatHex(<span class="keyword">new</span> <span class="title class_">byte</span>[] &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">60</span>, <span class="number">126</span>, -<span class="number">1</span>&#125;));</span><br><span class="line"></span><br><span class="line"><span class="comment">// Output:</span></span><br><span class="line"><span class="comment">// 0041</span></span><br><span class="line"><span class="comment">// 0a</span></span><br><span class="line"><span class="comment">// 03e8</span></span><br><span class="line"><span class="comment">// 000f4240</span></span><br><span class="line"><span class="comment">// 000000174876e800</span></span><br><span class="line"><span class="comment">// 0102033c7eff</span></span><br></pre></td></tr></table></figure>
<hr>
<h1 id="11-Java-18"><a class="header-anchor" href="#11-Java-18">Â¶ </a>11. Java 18+</h1>
<p>æ›´æ–°çš„ Java ç‰ˆæœ¬ç•™ç»™åŒå­¦ä»¬è‡ªè¡ŒæŸ¥é˜…å­¦ä¹ ã€‚ğŸ™‚</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.happycoders.eu/java/java-18-features/">Java 18 Features</a></li>
<li><a target="_blank" rel="noopener" href="https://www.happycoders.eu/java/java-19-features/">Java 19 Features</a></li>
<li><a target="_blank" rel="noopener" href="https://www.happycoders.eu/java/java-20-features/">Java 20 Features</a></li>
<li><a target="_blank" rel="noopener" href="https://www.happycoders.eu/java/java-21-features/">Java 21 Features</a></li>
</ul>

</div>


  <div class="book-comments">
    




  </div>



<script src="/js/book-post.js"></script>

        </div>
      </div>
      <div class="column col-2 hide-lg">
        <div class="book-post-info">
  
    <div class="book-post-meta">

  <div class="author">

    <!-- Author image -->
    <div class="author-img">
      
        <figure class="avatar avatar-lg">
          <img src="/avatar.svg" alt="...">
        </figure>
      
    </div>

    <!-- Author title -->
    <div class="author-title">
      <div>Love. T.A. ğŸ¥°</div>
      <div>2023-08-16</div>
    </div>
  </div>

  

  <div class="divider"></div>
</div>
  

  <div class="book-tocbot">
</div>
<div class="book-tocbot-menu">
  <a class="book-toc-expand" onclick="expand_toc()">Expand all</a>
  <a onclick="go_top()">Back to top</a>
  <a onclick="go_bottom()">Go to bottom</a>
</div>


<script src="/js/book-toc.js"></script>

</div>
      </div>
    </div>
  </div>
  
  <a class="off-canvas-overlay" onclick="hide_canvas()"></a>
</div>

<!-- hexo injector body_end start -->
<script src="/js/collapse.js"></script>
<!-- hexo injector body_end end --></body>
</html>


<script src="/js/book.js"></script>
