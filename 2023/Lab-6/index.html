<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no">

    
      <link rel="icon" href="/favicon.png" />
    

    <title>
        
          Lab 6 - BUAA 2023 OOP
        
    </title>

    <!-- Spectre.css framework -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/spectre.css/0.5.9/spectre.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/spectre.css/0.5.9/spectre-exp.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/spectre.css/0.5.9/spectre-icons.min.css">

    <!-- theme css & js -->
    
<link rel="stylesheet" href="/css/book.css">

    
<script src="/js/book.js"></script>


    <!-- tocbot -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.css">

    <!-- katex -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">

    
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/zooming/2.1.1/zooming.min.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function () {
    const zooming = new Zooming()
    zooming.listen('.book-content img')
})
</script>

<!-- hexo injector head_end start -->
<link rel="stylesheet" href="/css/collapse.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 5.4.2"></head>

<body>

<div class="book-container">
  <div class="book-sidebar">
    <div class="book-brand">
  <a href="/">
    <img src="/favicon.png">
    <span>BUAA 2023 OOP</span>
  </a>
</div>
    <div id="menu" class="book-menu hide">
  <h1 id="课程通知"><a class="header-anchor" href="#课程通知">¶ </a><strong>课程通知</strong></h1>
<ul>
<li><a href="/2023/Homework-Notice/">作业注意事项</a></li>
</ul>
<h1 id="Lab-🔬"><a class="header-anchor" href="#Lab-🔬">¶ </a><strong>Lab 🔬</strong></h1>
<ul>
<li><a href="/2023/Lab-1/">Lab 1</a></li>
<li><a href="/2023/Lab-2/">Lab 2</a></li>
<li><a href="/2023/Lab-3/">Lab 3</a></li>
<li><a href="/2023/Lab-4/">Lab 4</a></li>
<li><a href="/2023/Lab-5/">Lab 5</a></li>
<li><a href="/2023/Lab-6/">Lab 6</a></li>
<li><a href="/2023/Lab-7/">Lab 7</a></li>
<li><a href="/2023/Lab-8/">Lab 8</a></li>
<li><a href="/2023/Lab-9/">Lab 9</a></li>
<li><a href="/2023/Lab-10/">Lab 10</a></li>
<li><a href="/2023/Lab-Final/">Lab Final</a> ✨</li>
<li>All released! 🎉</li>
</ul>
<h1 id="迭代任务-📽️"><a class="header-anchor" href="#迭代任务-📽️">¶ </a><strong>迭代任务 📽️</strong></h1>
<ul>
<li><a href="/2023/Project-1/">迭代一</a></li>
<li><a href="/2023/Project-2/">迭代二</a></li>
<li><a href="/2023/Project-3/">迭代三</a></li>
<li><a href="/2023/Project-4/">迭代四</a></li>
<li>All released! 🎉</li>
</ul>
<h1 id="大作业-🎯"><a class="header-anchor" href="#大作业-🎯">¶ </a><strong>大作业 🎯</strong></h1>
<ul>
<li><a href="/2023/Teamwork/">大作业要求</a></li>
</ul>
<h1 id="帮助中心-💁🏻"><a class="header-anchor" href="#帮助中心-💁🏻">¶ </a><strong>帮助中心 💁🏻</strong></h1>
<ul>
<li><a href="/2023/Configure-Java-Environment/">Java 环境配置</a></li>
<li><a href="/2023/Java-Features-Summary/">Java 8 - 17 新特性总结</a></li>
<li><a href="/2023/Lab-Template/">Lab 问答报告模板</a></li>
<li><a href="/2023/patpat-User-Guide/">patpat 使用指南</a> 💫</li>
<li><a href="/2023/Q-A/">Q &amp; A</a></li>
</ul>

</div>


<script src="/js/book-menu.js"></script>

  </div>

  <div class="sidebar-toggle" onclick="sidebar_toggle()" onmouseover="add_inner()" onmouseleave="remove_inner()">
  <div class="sidebar-toggle-inner"></div>
</div>

<script>
function add_inner() {
  let inner = document.querySelector('.sidebar-toggle-inner')
  inner.classList.add('show')  
}

function remove_inner() {
  let inner = document.querySelector('.sidebar-toggle-inner')
  inner.classList.remove('show')
}

function sidebar_toggle() {
    let sidebar_toggle = document.querySelector('.sidebar-toggle')
    let sidebar = document.querySelector('.book-sidebar')
    let content = document.querySelector('.off-canvas-content')
    if (sidebar_toggle.classList.contains('extend')) { // show
        sidebar_toggle.classList.remove('extend')
        sidebar.classList.remove('hide')
        content.classList.remove('extend')
    }
    else { // hide
        sidebar_toggle.classList.add('extend')
        sidebar.classList.add('hide')
        content.classList.add('extend')
    }
}
</script>

  <div class="off-canvas-content">
    <div class="columns">
      <div class="column col-10 col-lg-12">
        <div class="book-navbar">
          <!-- For Responsive Layout -->

<header class="navbar">
  <section class="navbar-section">
    <a onclick="open_sidebar()">
      <i class="icon icon-menu"></i>
    </a>
  </section>
</header>

        </div>
        <div class="book-content">
          <div class="book-post">
  <h1 id="Lab-6-多态（Polymorphism）"><a class="header-anchor" href="#Lab-6-多态（Polymorphism）">¶ </a>Lab 6: 多态（Polymorphism）</h1>
<blockquote>
<p>至此，你已经见识到面向对象的三大的核心概念了——封装、继承和多态。😋</p>
<ul>
<li>Encapsulation</li>
<li>Inheritance</li>
<li>Polymorphism</li>
</ul>
</blockquote>
<div class="admonition error"><p>本次 Lab 时长为 <strong>2</strong> 周，DDL 为 <strong>10 月 30 日 23:59</strong>。</p>
</div>
<div class="admonition note"><p>附件下载（包括问答题和实验报告模板）：<a target="_blank" rel="noopener" href="https://bhpan.buaa.edu.cn/link/AA96D0CA694BB74ABFA070F38B6C527AC6">https://bhpan.buaa.edu.cn/link/AA96D0CA694BB74ABFA070F38B6C527AC6</a></p>
</div>
<h2 id="实验目的"><a class="header-anchor" href="#实验目的">¶ </a>实验目的</h2>
<ul>
<li>理解静多态和动多态的概念</li>
<li>理解多态的必要性和实现机制</li>
<li>理解并灵活使用方法重载和方法覆盖</li>
<li>理解并灵活使用抽象类和抽象方法</li>
<li>理解接口的必要性（将接口用作 API）</li>
<li>掌握如何定义接口、实现接口</li>
<li>将接口用作类型、使用接口回调</li>
<li>理解并掌握接口的继承</li>
<li>面向接口的编程</li>
<li>简单了解 Object 类</li>
<li>掌握良好重写 Object 类中方法的能力</li>
</ul>
<h2 id="实验题目"><a class="header-anchor" href="#实验题目">¶ </a>实验题目</h2>
<h3 id="Question-1：多态-1-（输出-简答题）"><a class="header-anchor" href="#Question-1：多态-1-（输出-简答题）">¶ </a>Question 1：多态  1 <em>（输出 / 简答题）</em></h3>
<p>阅读下面这段代码，回答问题。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">PrivateOverride</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">f</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;private f()&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">PrivateOverride</span> <span class="variable">po</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Derived</span>();</span><br><span class="line">        po.f();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Derived</span> <span class="keyword">extends</span> <span class="title class_">PrivateOverride</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">f</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;public f()&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        PrivateOverride.main(args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>运行 <code>Test</code> 的 <code>main</code> 方法，程序的输出是什么？</li>
<li>如果将父类中的方法声明为 <code>public</code>，而子类为 <code>private</code>，编译能通过吗？如果能，最后会输出什么？</li>
</ul>
<blockquote>
<p><strong>题外话</strong></p>
<p><code>private</code>方法默认是<code>final</code>的。</p>
</blockquote>
<h3 id="Question-2：多态-2-（输出-简答题）"><a class="header-anchor" href="#Question-2：多态-2-（输出-简答题）">¶ </a>Question 2：多态 2 <em>（输出 / 简答题）</em></h3>
<p>阅读下面这段代码，回答问题。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Super</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="variable">field</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getField</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> field;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Sub</span> <span class="keyword">extends</span> <span class="title class_">Super</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="variable">field</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getField</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> field;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getSuperField</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">super</span>.field;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Super</span> <span class="variable">sup</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Sub</span>(); <span class="comment">// upcasting</span></span><br><span class="line">        System.out.println(<span class="string">&quot;sup.field = &quot;</span> + sup.field +</span><br><span class="line">                           <span class="string">&quot;, sup.getField() = &quot;</span> + sup.getField());</span><br><span class="line">        <span class="type">Sub</span> <span class="variable">sub</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Sub</span>();</span><br><span class="line">        System.out.println(<span class="string">&quot;sub.field = &quot;</span> + sub.field +</span><br><span class="line">                           <span class="string">&quot;, sub.getField() = &quot;</span> + sub.getField() +</span><br><span class="line">                           <span class="string">&quot;, sub.getSuperField() = &quot;</span> + sub.getSuperField());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>运行 <code>Test</code> 的 <code>main</code> 方法，程序的输出是什么？</li>
<li>类的<strong>非静态属性</strong>能体现多态性吗？</li>
</ul>
<h3 id="Question3：多态-3-（输出-简答题）"><a class="header-anchor" href="#Question3：多态-3-（输出-简答题）">¶ </a>Question3：多态 3 <em>（输出 / 简答题）</em></h3>
<p>阅读下面这段代码，回答问题。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">StaticSuper</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">staticGet</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Base staticGet()&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">dynamicGet</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Base dynamicGet()&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">StaticSub</span> <span class="keyword">extends</span> <span class="title class_">StaticSuper</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">staticGet</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Derived staticGet()&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">dynamicGet</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Derived dynamicGet()&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">StaticSuper</span> <span class="variable">sup</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StaticSub</span>(); <span class="comment">// upcasting</span></span><br><span class="line">        System.out.println(StaticSuper.staticGet());</span><br><span class="line">        System.out.println(sup.dynamicGet());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>运行 <code>Test</code> 的 <code>main</code> 方法，程序的输出是什么？</li>
<li>类的<strong>静态属性</strong>和<strong>静态方法</strong>能体现多态性吗？</li>
</ul>
<h3 id="Question4：多态-4-（输出-简答题）"><a class="header-anchor" href="#Question4：多态-4-（输出-简答题）">¶ </a>Question4：多态 4 <em>（输出 / 简答题）</em></h3>
<p>阅读下面的代码，回答问题。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">draw</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;A.draw()&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    A() &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;A() before draw()&quot;</span>);</span><br><span class="line">        draw();</span><br><span class="line">        System.out.println(<span class="string">&quot;A() after draw()&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span> <span class="keyword">extends</span> <span class="title class_">A</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">b</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    B(<span class="type">int</span> b) &#123;</span><br><span class="line">        <span class="built_in">this</span>.b = b;</span><br><span class="line">        System.out.println(<span class="string">&quot;B(), b = &quot;</span> + <span class="built_in">this</span>.b);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">draw</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;B.draw(), b = &quot;</span> + <span class="built_in">this</span>.b);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">B</span>(<span class="number">5</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>运行 <code>Test</code> 的 <code>main</code> 方法，程序的输出是什么？</li>
<li>结合之前实验的初始化顺序和多态，给出程序这样输出的解释。</li>
</ul>
<h3 id="Question-5：ShapeFactory-1-（编程题）"><a class="header-anchor" href="#Question-5：ShapeFactory-1-（编程题）">¶ </a>Question 5：ShapeFactory 1 <em>（编程题）</em></h3>
<p>在 <a href="/2023/Lab-5/">Lab 5</a> 的<code>Shape</code>的基础上，实现一个满足如下需求的 <code>ShapeFactory</code> 类：</p>
<ul>
<li>
<p>提供一个 <code>ShapeType</code> 的枚举类，其中有表示矩形、菱形、椭圆的枚举量；</p>
</li>
<li>
<p>具有方法 <code>public Shape makeShape(ShapeType type, double a, double b)</code>，返回一个由 <code>type</code> 指定类型，<code>a</code> 和 <code>b</code> 指定大小的形状，参数不合法时，返回 <code>null</code> 或抛出异常。</p>
</li>
<li>
<p>具有方法 <code>public Shape randomNextShape()</code>，返回一个随机类型，随机大小的形状。</p>
<blockquote>
<p>随机得到的形状要合法，不能随机出来 <code>null</code>。</p>
</blockquote>
</li>
</ul>
<p><strong>编写测试类</strong></p>
<p>使用以上的两种生成形状的方式，分别随机生成五个形状并存储到 <code>Shape</code> 类型的数组（或其他容器）中，最后使用 <code>foreach</code> 循环将它们的面积输出。</p>
<p><strong>注意：不能修改上一次的 <code>Shape</code>。</strong></p>
<blockquote>
<p><strong>题外话</strong></p>
<p>这题不是设计模式中的工厂方法模式（Factory method pattern）。本题中的工厂，如果你为 <code>Shape</code> 添加了一个新的子类（比如直角三角形类），那么你就需要给 <code>ShapeType</code> 添加新的枚举量，还要重新写 <code>makeShape</code> 和 <code>randomNextShape</code>。</p>
</blockquote>
<h3 id="Question0-6：Overload？Override？-（简答题）"><a class="header-anchor" href="#Question0-6：Overload？Override？-（简答题）">¶ </a>Question0 6：Overload？Override？ <em>（简答题）</em></h3>
<p>阅读下面这段代码，回答问题。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">I0</span> &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">f</span><span class="params">()</span>; <span class="comment">// 默认是 abstract public 的</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">I1</span> &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">f</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">I2</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">2</span>; <span class="comment">// 默认是 static public final 的</span></span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="title function_">f</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">I3</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="title function_">f</span><span class="params">(<span class="type">int</span> i)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">I4</span> &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">f</span><span class="params">(<span class="type">int</span> i)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Test01</span> <span class="keyword">implements</span> <span class="title class_">I0</span>, I1 &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">f</span><span class="params">()</span> &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Test02</span> <span class="keyword">implements</span> <span class="title class_">I0</span>, I2 &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">f</span><span class="params">()</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">f</span><span class="params">()</span> &#123;<span class="keyword">return</span> <span class="number">0</span>;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Test23</span> <span class="keyword">implements</span> <span class="title class_">I2</span>, I3 &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">f</span><span class="params">()</span> &#123;<span class="keyword">return</span> a;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">f</span><span class="params">(<span class="type">int</span> i)</span> &#123;<span class="keyword">return</span> i;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>这段程序是无法通过编译的，都有哪些原因呢？尝试从继承、覆盖、重载的角度考虑。</li>
<li>如果 <code>I1 extends I0</code>，会引入新的错误吗？<code>I2、I3</code> 也 <code>extends I0</code> 呢？</li>
</ul>
<blockquote>
<p><strong>题外话</strong></p>
<p>在任何支持多重继承的语言中，多个父类拥有相同的函数名都会带来误会，如果不是万不得已，千万不要这么做。</p>
<p>还有更多复杂的情况，比如</p>
<ul>
<li><code>class B extends A implements I</code></li>
<li><code>class A implements I1</code>，<code>class B extends A implements I2</code></li>
</ul>
<p>更多情况请自行尝试并理解。</p>
</blockquote>
<hr>
<h2 id="附加题"><a class="header-anchor" href="#附加题">¶ </a>附加题</h2>
<blockquote>
<p>附加题可以在时间不充足时先略过，但请务必在完成作业期间或者完成后完成一遍。附加题包括的知识点并不重复，甚至<strong>更为重要</strong>，放到附加题不代表这些题是不重要的。语言使用是一方面，这些<strong>设计模式</strong>才是面向对象程序设计的精髓所在。</p>
<p>换句话说， 你在提交实验报告的时候， 可以不完成下面的题目。</p>
<p>只要完成了基础的 6 个题目，即可拿到本次实验的全部分数。</p>
</blockquote>
<h3 id="Extra-1：策略模式（Strategy-Pattern）（编程题）"><a class="header-anchor" href="#Extra-1：策略模式（Strategy-Pattern）（编程题）">¶ </a>Extra 1：策略模式（Strategy Pattern）<em>（编程题）</em></h3>
<p>如果一些方法只保留了业务中逻辑固定不变的部分，只依据参数的不同来产生不同的行为，符合这样的方法，就是符合策略模式（Strategy Pattern）。</p>
<p>接口经常用于策略模式。定义 <code>interface ITextProcess</code>：</p>
<ul>
<li>具有方法 <code>String process(String s)</code></li>
</ul>
<p>利用 <code>interface ITextProcess</code> 完成几个类：</p>
<ul>
<li>
<p><code>class Splitter</code>，其 <code>process</code> 方法将 s 中的所有空格都去掉。</p>
</li>
<li>
<p><code>class UpperCaseProcessor</code>，其 <code>process</code> 方法将 s 中的所有字符都变为大写的。</p>
</li>
<li>
<p><code>class SnakeCaseProcessor</code>，其 <code>process</code> 方法将 s 转变为 <code>snake_case</code>。</p>
<blockquote>
<p>snake_case 指的是不用空格而用下划线分隔单词，如：</p>
<ul>
<li>
<p>I hate ddl -&gt; I_hate_ddl</p>
</li>
<li>
<p>have a good time -&gt; have_a_good_time</p>
</li>
</ul>
</blockquote>
</li>
</ul>
<p>编写测试类：</p>
<ul>
<li>提供方法 <code>public static void process(ITextProcess p, String s)</code>，在其中使用 p 处理 s，并输出处理结果。</li>
<li>在 main 中测试你的功能。</li>
</ul>
<h4 id="题外话："><a class="header-anchor" href="#题外话：">¶ </a>题外话：</h4>
<p>本题中，业务逻辑<strong>不变</strong>的是使用一个文本处理器处理文本，<strong>变化</strong>的是使用的处理器和文本内容。测试类的 <code>process</code> 方法是符合策略模式的。这样可以保证也实现了 <code>ITextProcess</code> 的类在添加到系统时，<strong>无需对原有代码产生影响</strong>，在这种情况下，保证了原有代码的可复用性。</p>
<p><code>interface</code> 在这里的作用，就是定义一个标准，定义一种框架。如果没有 interface，那么我们就需要像第五题的 ShapeFacotry 一样，通过参数指定处理器的类型，为原有代码增加更多的特殊情况判断。</p>
<p>使用 <code>interface</code> 而不使用继承的另一个原因是：现实场景下，<code>Splitter</code> 等可能需要继承其他类，而 <code>TextProcess</code> 并没有必须要有的属性，所以没有必要让他们都继承一个 abstract class <code>TextProcessor</code>。如果出现了不得不同时继承多个类的情况，后续实验会提到装饰器模式（Decorator Pattern），也可以通过拆解类结构来化继承为组合。</p>
<h3 id="Extra-2：真-·-工厂方法模式-（编程题）"><a class="header-anchor" href="#Extra-2：真-·-工厂方法模式-（编程题）">¶ </a>Extra 2：真 · 工厂方法模式 <em>（编程题）</em></h3>
<p>在 <a href="/2023/Lab-5/">Lab 5</a> 的 Shape 的基础上，定义一个满足如下需求的 <code>IShapeFactory</code> 接口：</p>
<ul>
<li>
<p>具有方法 <code>Shape makeShape(double a, double b)</code> ，返回一个由 a 和 b 指定大小的形状。</p>
<blockquote>
<p>参数不合法时，返回 null 或抛出异常，或是采用你喜欢的方式处理。</p>
</blockquote>
</li>
</ul>
<p>为每一种形状编写它的工厂类：</p>
<ul>
<li>比如生成矩形的工厂类 <code>RectangleFactory</code> 要实现接口 <code>IShapeFactory</code>。</li>
</ul>
<p>编写测试类 <code>ShapeFactoriesTest</code>：</p>
<ul>
<li>具有 static 方法 <code>Shape makeShape(IShapeFactory factory, double a, double b)</code> ，在其中使用 <code>factory.makeShape(a, b)</code>方法生成形状并返回。</li>
<li>在 <code>main</code> 方法中声明所有 3 种工厂，将他们存入一个 <code>IShapeFactory</code> 类型的数组（或其他容器）</li>
<li>对工厂数组（或容器）使用 <strong>foreach</strong> 循环遍历，利用 <code>ShapeFactories.makeShape</code> 方法生成所有种类的形状并输出他们的面积</li>
</ul>
<h4 id="题外话：-v2"><a class="header-anchor" href="#题外话：-v2">¶ </a>题外话：</h4>
<p>这题才是设计模式中的工厂方法模式（Factory method pattern），第五题虽然也是比较常用的“工厂”，但并不是工厂方法模式，甚至不是一个专门的设计模式。</p>
<p>工厂方法模式将实例化延迟到子类，由专门的工厂类生成特定类型的产品（比如 <code>Shape</code>）。本次实验没有关于 Random<br>
的需求，主要是因为设计上的问题，他和本题的初衷“简单了解工厂方法模式”不符，它不是特定的，它需要知道所有的类型信息，类似本题中的 <code>ShapeFactoriesTest</code> 的地位。</p>
<p>第五题中的方法，需要使用诸如 <code>ShapeType</code> 的标准来指定类型，这就导致了如果有新 的需求（新的形状种类）出现，整个 <code>ShapeFactory</code> 类都要重新编写并编译。而使用工厂方法模式，你需要做的是编写一个新的工厂类并编译这个新的类，对原有的工厂代码无需进行修改（重构过的同学应该能体会到“不用修改代码”是一种多么幸福的事）。编写的时候可能觉得引入过多的类比较反人类，但是程序<strong>不是开发出来就完事了，还有维护和迭代更新</strong>。提倡在开工之前的设计环节为未来做足打算，但是也不要因此变成设计狂魔（是的话也没有关系的，毕竟设计是多么<strong>美妙</strong>的事情啊。🥰）。上机题是为了在比较小的工作量下让大家了解基础内容，所以才会抽象出各种各样不现实的场景。如果像某次实验的“文件”那样，在工作量上并不友好。本题的 <code>ShapeFactories.makeShape</code> 也是策略模式的应用。</p>
<h3 id="Extra-3：匿名类的-ShapeFactory-（编程题）"><a class="header-anchor" href="#Extra-3：匿名类的-ShapeFactory-（编程题）">¶ </a>Extra 3：匿名类的 ShapeFactory <em>（编程题）</em></h3>
<p>在前面实验的 <code>Shape</code> 的基础上，定义一个满足如下需求的 <code>IShapeFactory</code> 接口：</p>
<ul>
<li>具有方法 <code>Shape makeShape(double a, double b)</code> ，返回一个由 a 和 b 指定大小的 形状；
<ul>
<li>参数不合法时，返回 null 或抛出异常</li>
</ul>
</li>
</ul>
<p>用单例模式 + 工厂方法模式的思想修改矩形、椭圆、菱形类：</p>
<ul>
<li>
<p>每一个类都增设一个 <code>private static IShapeFactory factory</code> 字段</p>
<blockquote>
<p>类中的 <code>factory</code> 用于生成该类的形状对象，比如 <code>Rectangle</code> 类中的 <code>factory</code>，其 <code>makeShape</code> 方法返回 <code>Rectangle</code> 对象，直接使用匿名类为 <code>factory</code> 进行静态初始化，不允许像 Extra 2 那样定义工厂类</p>
</blockquote>
</li>
<li>
<p>进行其他的修改，使外界的其他类能够获取到 <code>factory</code> 并成功构造形状对象</p>
</li>
</ul>
<p>选择你认为合适的方式编写测试类：</p>
<ul>
<li>你的测试类应该能够覆盖到所有等价类。</li>
<li>测试形式可以是单元测试，被测对象的形式可以参考之前实验中的 <code>ShapeFactoriesTest.makeShape</code> 方法。</li>
<li>在代码注释中（或者与代码一起提交一个 readme），描述你的测试计划。</li>
</ul>
<h4 id="题外话：-v3"><a class="header-anchor" href="#题外话：-v3">¶ </a>题外话：</h4>
<p>使用匿名类，依然是为每一个形状创建了一个对应的工厂，因此本质上依然是工厂方法模式，区别在于不用显式定义新的类（据说编码过程中，起名字是最麻烦的事情）。</p>
<p>工厂方法模式的应用中，每一种工厂通常只有一个实例，因此它经常和<strong>单例模式</strong>一起被使用。</p>
<h3 id="Extra-4-命令模式-（编程题）"><a class="header-anchor" href="#Extra-4-命令模式-（编程题）">¶ </a>Extra 4 命令模式 <em>（编程题）</em></h3>
<p>我们来模拟一个酒吧的点餐过程：</p>
<p>实现一个酒吧类 <code>Bar</code>：柜台上可以点炒饭（为了防止测试工程师炸掉酒吧），啤酒，伏特加。</p>
<p>实现一个测试工程师类 <code>Engineer</code>：有很多很多钱可以用来点炒饭。</p>
<p>实现一个满足如下需求的 <code>interface ICommand</code>：</p>
<ul>
<li>具有方法 <code>void excute()</code></li>
</ul>
<p>利用 <code>interface ICommand</code>，实现如下四个具体命令类：</p>
<ul>
<li>买炒饭 <code>BuyEggFriedRice(Bar bar, int num)</code>
<ul>
<li>含义是在酒吧 <code>bar</code> 中点 <code>num</code> 份炒饭， 该命令在执行时需要调用 bar 的相关方法， 下同</li>
</ul>
</li>
<li>买啤酒 <code>BuyBeer(Bar bar, int num)</code></li>
<li>买伏特加 <code>BuyVodka(Bar bar, int num)</code></li>
<li>消费 x 元 <code>SpendMoney(Engineer engineer, double money)</code></li>
</ul>
<p>实现一个执行类 <code>Executor</code> 负责接收并执行上述命令</p>
<ul>
<li>具有方法： <code>void add(ICommand command)</code> 含义是添加一个命令</li>
<li>具有方法： <code>void run()</code> 含义是执行所有命令</li>
</ul>
<p>最终，你应该可以跑通下面的测试函数，当然你也可以自行设计其他的测试代码。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Bar</span> <span class="variable">bar</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Bar</span>();</span><br><span class="line">        <span class="type">Engineer</span> <span class="variable">engineer1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Engineer</span>();</span><br><span class="line">        <span class="type">Engineer</span> <span class="variable">engineer2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Engineer</span>();</span><br><span class="line">        <span class="comment">// 点一份炒饭 + 啤酒， 花费 30 元</span></span><br><span class="line">        <span class="type">Executor</span> <span class="variable">executor1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Executor</span>();</span><br><span class="line">        executor1.add(<span class="keyword">new</span> <span class="title class_">BuyBeer</span>(bar, <span class="number">1</span>));</span><br><span class="line">        executor1.add(<span class="keyword">new</span> <span class="title class_">BuyEggFriedRice</span>(bar, <span class="number">1</span>));</span><br><span class="line">        executor1.add(<span class="keyword">new</span> <span class="title class_">SpendMoney</span>(engineer1, <span class="number">30</span>));</span><br><span class="line">        executor1.run();</span><br><span class="line">        <span class="comment">// 点两份炒饭， AA，每人 20 元</span></span><br><span class="line">        <span class="type">Executor</span> <span class="variable">executor2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Executor</span>();</span><br><span class="line">        executor2.add(<span class="keyword">new</span> <span class="title class_">BuyBeer</span>(bar, <span class="number">2</span>));</span><br><span class="line">        executor2.add(<span class="keyword">new</span> <span class="title class_">SpendMoney</span>(engineer1, <span class="number">20</span>));</span><br><span class="line">        executor2.add(<span class="keyword">new</span> <span class="title class_">SpendMoney</span>(engineer2, <span class="number">20</span>));</span><br><span class="line">        executor1.run();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>该段代码只是示例，具体使用时可能需要一定的修改。（如添加 <code>package</code>，<code>import</code> 等。）</p>
</blockquote>

</div>


  <div class="book-comments">
    




  </div>



<script src="/js/book-post.js"></script>

        </div>
      </div>
      <div class="column col-2 hide-lg">
        <div class="book-post-info">
  
    <div class="book-post-meta">

  <div class="author">

    <!-- Author image -->
    <div class="author-img">
      
        <figure class="avatar avatar-lg">
          <img src="/avatar.svg" alt="...">
        </figure>
      
    </div>

    <!-- Author title -->
    <div class="author-title">
      <div>Love. T.A. 🥰</div>
      <div>2023-10-17</div>
    </div>
  </div>

  

  <div class="divider"></div>
</div>
  

  <div class="book-tocbot">
</div>
<div class="book-tocbot-menu">
  <a class="book-toc-expand" onclick="expand_toc()">Expand all</a>
  <a onclick="go_top()">Back to top</a>
  <a onclick="go_bottom()">Go to bottom</a>
</div>


<script src="/js/book-toc.js"></script>

</div>
      </div>
    </div>
  </div>
  
  <a class="off-canvas-overlay" onclick="hide_canvas()"></a>
</div>

<!-- hexo injector body_end start -->
<script src="/js/collapse.js"></script>
<!-- hexo injector body_end end --></body>
</html>


<script src="/js/book.js"></script>
